\documentclass[12pt]{amsart}
\usepackage{amstext,amsfonts,amssymb,amscd,amsbsy,amsmath,verbatim}
\usepackage[alphabetic,backrefs,lite]{amsrefs} %bibliography
\usepackage{ifthen, fullpage, extarrows}
\usepackage{color,tikz,multirow}
\usepackage{amsthm}
\usepackage{latexsym}
\usepackage[all]{xy}
\usepackage{enumerate}
\usepackage{diagrams}



\newtheorem{lemma}{Lemma}[section]
\newtheorem{theorem}[lemma]{Theorem}
\newtheorem{propo}[lemma]{Proposition}
\newtheorem{prop}[lemma]{Proposition}
\newtheorem{cor}[lemma]{Corollary}
\newtheorem{conj}[lemma]{Conjecture}
\newtheorem{claim}[lemma]{Claim}
\newtheorem{claim*}{Claim}
\newtheorem{thm}[lemma]{Theorem}
\newtheorem{notation}[lemma]{Notation}

\theoremstyle{definition}
\newtheorem{example}[lemma]{Example}
\newtheorem{defn}[lemma]{Definition}

\theoremstyle{remark}
\newtheorem{remark}[lemma]{Remark}
\newtheorem{question}[lemma]{Question}

% Commands

\newcommand{\isom}{\cong}
\newcommand{\m}{\mathfrak m}
\newcommand{\lideal}{\langle}
\newcommand{\rideal}{\rangle}
\newcommand{\initial}{\operatorname{in}}
\newcommand{\Hilb}{\operatorname{Hilb}}
\newcommand{\hilb}{\operatorname{hilb}}
\newcommand{\Spec}{\operatorname{Spec}}
\newcommand{\im}{\operatorname{im}}
\newcommand{\NS}{\operatorname{NS}}
\newcommand{\Frac}{\operatorname{Frac}}
\newcommand{\ch}{\operatorname{char}}
\newcommand{\Proj}{\operatorname{Proj}}
\newcommand{\id}{\operatorname{id}}
\newcommand{\Div}{\operatorname{Div}}
\newcommand{\tr}{\operatorname{tr}}
\newcommand{\Tr}{\operatorname{Tr}}
\newcommand{\supp}{\operatorname{supp}}
\newcommand{\Gal}{\operatorname{Gal}}
\newcommand{\Pic}{\operatorname{Pic}}
\newcommand{\QQbar}{{\overline{\mathbb Q}}}
\newcommand{\Br}{\operatorname{Br}}
\newcommand{\Bl}{\operatorname{Bl}}
\newcommand{\Cox}{\operatorname{Cox}}
\newcommand{\Tor}{\operatorname{Tor}}
\newcommand{\Tot}{\operatorname{Tot}}
\newcommand{\diam}{\operatorname{diam}}
\newcommand{\Hom}{\operatorname{Hom}} %done
\newcommand{\Ext}{\operatorname{Ext}} %done
\newcommand{\sheafHom}{\mathcal{H}om}
\newcommand{\Gr}{\operatorname{Gr}}
\newcommand{\Osh}{{\mathcal O}}
\newcommand{\kk}{\Bbbk}
\newcommand{\coker}{\operatorname{coker}}
\newcommand{\rank}{\operatorname{rank}}
\newcommand{\pt}{\text{pt}}
\newcommand{\codim}{\operatorname{codim}}
\newcommand{\PP}{\mathbb{P}}
\renewcommand{\AA}{\mathbb{A}}
\newcommand{\GG}{\mathbb{G}}
\newcommand{\HH}{\mathrm{H}}
\newcommand{\KK}{\mathrm{K}}
\newcommand{\ZZ}{\mathbb{Z}}
\newcommand{\QQ}{\mathbb{Q}}
\newcommand{\UU}{\mathrm{U}}
\newcommand{\VV}{\mathrm{V}}
\newcommand{\WW}{\mathrm{W}}
\newcommand{\Wvb}{\mathrm{W}_{\text{vb}}}
\newcommand{\NN}{\mathbb{N}}
\newcommand{\CC}{\mathbb{C}}
\newcommand{\RR}{\mathbb{R}}
\newcommand{\bb}{\mathbf{b}}
\newcommand{\dd}{\mathbf{d}}
\newcommand{\bmin}{\mathbf{b}_{\text{min}}}
\newcommand{\bmax}{\mathbf{b}_{\text{max}}}
\newcommand{\uHH}{\underline{\mathsf{H}}}
\newcommand{\cO}{\mathcal{O}}
\newcommand{\cE}{\mathcal{E}}
\newcommand{\cF}{\mathcal{F}}
\newcommand{\cU}{\mathcal{U}}
\newcommand{\EE}{\mathbf{E}}
\newcommand{\bB}{\mathbf{B}}
\newcommand{\bG}{\mathbf{G}}
\newcommand{\bK}{\mathbf{K}}

\newcommand{\FF}{\mathbf{F}}
\newcommand{\Gbull}{\mathbf{G}}
\newcommand{\Kbull}{\mathbf{K}}
\newcommand{\Sym}{\operatorname{Sym}} %done  
\newcommand{\GL}{{GL}}
\newcommand{\Syz}{\operatorname{Syz}}
\newcommand{\pos}{\operatorname{pos}}

\newcommand{\defi}[1]{\textsf{#1}} % for defined terms

\newcommand{\zp}{\circ}
\newcommand{\BQ}{\mathrm{B}}
\newcommand{\DD}{\mathrm{D}}
\newcommand{\w}{\widetilde}
\newcommand{\CQ}{\mathrm{C}}
\newcommand{\CvbQ}{\mathrm{C}_{\text{vb}}}
\newcommand{\BBQ}{\mathrm{B}}
\newcommand{\BBirr}{\underline{\mathrm{B}}^{\text{irr}}}
\newcommand{\CCQ}{\underline{\mathrm{C}}}
\newcommand{\Bmod}{\ensuremath{B_\text{mod}}}
\newcommand{\Bint}{\ensuremath{B_\text{int}}}
\newcommand{\Lotimes}{\overset{\mathrm{L}}{\otimes}}
\newcommand{\daniel}[1]{{\color{green} \sf $\clubsuit\clubsuit\clubsuit$ Daniel: [#1]}}
\newcommand{\mauricio}[1]{{\color{blue} \sf $\clubsuit\clubsuit\clubsuit$ Mauricio: [#1]}}
\newcommand{\david}[1]{{\color{red} \sf $\clubsuit\clubsuit\clubsuit$ David: [#1]}}

\renewcommand{\P}{{\mathbb P}}
\def\edim{\operatorname{edim}}
\def\reg{\operatorname{reg}}
\def\pdim{\operatorname{pdim}}
\newcommand{\ve}[1]{\ensuremath{\mathbf{#1}}}
\newcommand{\chr}{\ensuremath{\operatorname{char}}}
\def\brack{[\ , \ ]}
\def\Coh{{\rm Coh}}
\def\gr{{\rm gr}}

\def\ES{Eisenbud-Schreyer}
\def\BS{Boij-S\"oderberg}

\title{Categorified Duality in Boij--S\"oderberg Theory}
\author{David Eisenbud}
\author{Daniel Erman}\thanks{First author supported by an NSF and second author supported by an NSF and by Simons \dots}
\date{\today}
%\address{Department of Mathematics, University of California,
%	Berkeley, CA 94720, USA}
%\email{derman@math.berkeley.edu}
%\urladdr{http://math.berkeley.edu/\~{}derman}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\maketitle



\begin{abstract} In this paper present a more robust foundation for the duality theory introduced by Eisenbud and Schreyer to prove the Boij-S\"oderberg conjectures, which describe the numerical invariants coming from syzygies. The new foundations allow us to substantially extend the reach of the theory.

More explicitly, let $\kk$ be a field and let $S = \kk[x_{0}, \dots,x_{n}]$ be the homogeneous coordinate ring of $\PP^{n}_{\kk}$.
We construct a pairing between derived categories that takes a bounded complex of
finitely generated graded $S$-modules,  and a complex of coherent sheaves on $\P^{n}$, and produces a bounded complex of finitely generated graded modules over a polynomial ring in 1 variable. This pairing simultaneously categorifies all the functionals used by Eisenbud an Schreyer in their proof of the Boij-S\"oderberg conjectures. With this tool we extend the Eisenbud-Schreyer theorem to describe the cone of Betti tables of finite, minimal free complexes of $S$-modules with homology modules of specified dimensions;  and we provide descriptions of cones of Betti tables and cohomology tables in many examples beyond $\PP^n$; and we explain how the theory might generalize to the toric case.
\end{abstract}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Introduction}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
The Boij-S\"oderberg conjectures, proved by Eisenbud and Schreyer~\cite{eis-schrey1}, give a simple description, up to scalar multiple, of the possible values of invariants coming from finite free resolutions over a polynomial ring. In this paper we present a more robust foundation for this theory. Using it, we greatly extend the range of examples and situations to which the theory applies.

Let $\kk$ be a field, and let $S=\kk[x_0, \dots, x_n]$ be the polynomial ring. Recall that if 
$$
\FF: \cdots \to \FF_{i}\to \cdots
$$
is a bounded complex of finitely generated graded free $S$-modules, then $\beta_{i,j}\FF$ is by definition the dimension of the degree $j$ component of the graded vector space $\Tor_i(\FF,\kk)_j$.  The \emph{Betti table} of $F$ is the vector with coordinates $\beta_{i,j}\FF$ in the vector space $\VV = \oplus_{i\in \ZZ} \oplus_{j\in \ZZ}\QQ$. Similarly, the \emph{cohomology table} of a bounded complex of coherent sheaves $\cE$ on $\PP^{n}$ is the vector with coordinates $\gamma_{i,j}\cE := h^{i}\cE(j)$ in the vector space $\WW = \oplus_{i\in \ZZ}\prod_{j\in \ZZ}\QQ$, where $h^{i}\cE(n)$ denotes the dimension of the $i$-th hypercohomology of the complex $\cE(j) := \cE \otimes \cO_{\PP^{n}}(j)$. 
Given a graded module, or a complex of graded modules $M$ over $S$, we write $\widetilde M$ for the corresponding sheaf or complex of sheaves on $\PP^{n}$. 


Eisenbud and Schreyer \cite{eis-schrey1} described an infinite family $\langle -,-\rangle_{\tau,\kappa}$ bilinear functionals that, together, provide a duality between the rational cone generated by the cohomology tables of coherent sheaves on $\PP^n$ on one hand,  and the ratioal cone generated by the Betti tables of minimal free resolutions over the graded polynomial ring $S:=\kk[x_0, \dots, x_n]$ on the other. Using this duality they proved the conjectures of Boij--S\"oderberg~\cite{boij-sod1}. The theory has been further extended by~\cite{boij-sod2,eis-schrey2}. All of these papers use the original functionals $\langle -,-\rangle_{\tau,\kappa}$, but the nature of these functionals has remained mysterious. 

It has been difficult to extend the theory to resolutions over other rings, and only a little progress has been made~\cites{beks-local,boij-floystad,eis-schrey-abel,floystad-multigraded}. Though it seems natural to consider the multi-graded case through toric varieties, there has been essentially no progress in this direction.

In this paper we interpret all of the functionals $\langle-,-\rangle_{\tau,\kappa}$ in terms of a single a pairing on derived categories. This pairing takes values in a derived category of graded modules over a polynomial ring in 1 variable.  This idea gives a new foundation for Boij-Soederberg theory, and occupies Part I (Sections 1--3) of this paper. 

In Part II of the paper we apply this categorification  to extend the theory in several directions.  First, we we treat the Betti numbers of finite free complexes with homology (Sections ****--****). Second,  we extend the theory to a much wider class of graded rings (Sections ****--****).  Third, we explain a natural generalization to the multigraded case (Sections ****--****).

To be explicit, 
%let $A = \kk[t]$, the polynomial ring in 1 variable and 
let $D^{b}(\P^{n}), D^{b}(S), D^{b}(A)$ denote the bounded derived categories of the categories of coherent sheaves on $\P^{n}$ and of finitely generated graded modules over $S$ and $A$, respectively.  The central construction of this paper is a functor
$$
D^{b}(S)\times D^{b}(\P^{n})  \rTo^{\Phi} D^{b}(A),
$$
with the following properties:
\begin{theorem}\label{thm:Phi}
\begin{enumerate}
	\item\label{thm:Phi:1}  The Betti table of $\Phi(\FF,\cE)$ depends only on the Betti table of $\FF$ and the cohomology table of $\cE$.
	\item\label{thm:Phi:2}  If $\widetilde{\FF}\otimes \cE$ is exact, then $\Phi(\FF,\cE)$ has finite length homology.  This occurs whenever $\FF$ is a complex with finite length homology and $\cE$ is a vector bundle.  Moreover, if $\codim(\FF)+\codim(\cE)\geq n+1$ then  $\Phi(\FF,\cE)$ has the Betti table of a complex with finite length homology\end{enumerate}
\end{theorem}

The functor $\Phi$ thus yields bilinear pairings relating Betti tables and cohomology tables.  For instance, one such pairing is given by:
\begin{equation*}%\tag{**}
\label{eqn:**}
\begin{tabular}{c c c c c}
$\left\{\begin{matrix}
%\text{Cone generated by}\\
\text{Betti tables of} \\ \text{free $S$-complexes}\\
\text{ with homology}\\ \text{ of finite length}
\end{matrix}\right\}$
&
$\times$
&
$\left\{\begin{matrix}
%\text{Cone generated by}\\
\text{cohomology }\\
\text{tables of vector}\\
\text{ bundles on } \PP^n
\end{matrix}\right\}$
&
$\longrightarrow$
&
$\left\{\begin{matrix}
%\text{Cone generated by}\\
\text{Betti tables of} \\ \text{free $A$-complexes}\\
\text{ with homology}\\ \text{ of finite length}
\end{matrix}\right\},$
%\\
%$\bigg(\beta(\FF))$
%&
%,
%&
%$\gamma(\cE)\bigg)$
%&
%$\mapsto$
%&
%$\beta(\Phi(\FF,\cE)).$
\end{tabular}
\end{equation*}
%\begin{equation*}%\tag{**}
%\label{eqn:**}
%%
%\left\{\begin{matrix}
%%\text{Cone generated by}\\
%\text{Betti tables of} \\ \text{free $S$-complexes}\\
%\text{ with homology}\\ \text{ of finite length}
%\end{matrix}\right\}
%%
%\times 
%%
%\left\{\begin{matrix}
%%\text{Cone generated by}\\
%\text{cohomology }\\
%\text{tables of vector}\\
%\text{ bundles on } \PP^n
%\end{matrix}\right\}
%%
%\longrightarrow
%\left\{\begin{matrix}
%%\text{Cone generated by}\\
%\text{Betti tables of} \\ \text{free $A$-complexes}\\
%\text{ with homology}\\ \text{ of finite length}
%\end{matrix}\right\}
%\end{equation*}
%(Here we think of a vector bundle
%as a graded module, regarded in turn as a complex of graded modules concentrated in one (arbitrary) homological degree.)
where $(\beta(\FF),\gamma(\cE))\mapsto \beta(\Phi(\FF,\cE))$.  Based on Theorem~\ref{thm:Phi}\eqref{thm:Phi:2}, we also obtain similar pairings where we increase the dimension of the homology of our free $S$-complexes and we correspondingly decrease the dimension of the support of the sheaves on $\mathbb P^n$.  We prove that this  gives a  \emph{duality pairing} of cones, as represented in Figure~\ref{fig:bracket},
in the sense that:
\begin{itemize}
\item This extends to a bilinear pairing from $\VV\times \WW$ to $\UU: = \oplus_{i\in \ZZ} \oplus_{j\in \ZZ}\QQ$.  Further, if we restrict to the convex subcones of $\VV, \WW,$ and $\UU$ generated by the above Betti tables and cohomology tables, then the pairing restricts to a map between these three cones;
\item The only elements of $\VV$ that pair with all elements of the cone in the second factor
 to give elements of the cone in the target are, up to a rational multiple, the Betti tables of  resolutions of finite length modules.  We also obtain a similar statement, where we reverse the roles of 
 the first and second cones.
\end{itemize} 
 We prove similar results for complexes with homology of higher dimension, as well. 
 %The case of free resolutions treated in \cite{eis-schrey1} follows immediately by the observation that a  complex of graded free $S$-modules of length $n+1$ with finite length homology has, in fact, homology only at the end, so it is a free resolution (\cite{}).

The target of this duality pairing, the cone of Betti tables on $A$, is easy to describe, and it is easy to write down the positive functionals that define it or the subcone composed of Betti tables of complexes with finite length homology. 
The functor $\Phi$ induces all the pairings defined by Eisenbud and Schreyer: composing $\Phi$ with such functionals we get all the functionals $\langle -,-\rangle_{\tau,\kappa}$ used by Eisenbud and Schreyer.

As noted above, working with the derived category $\DD^b(S)$ instead of minimal free resolutions represents a shift in perspective for Boij--S\"oderberg theory.  This shift is essential, as the functor $\Phi$ does not respect the property of being a resolution: if $\FF$ is a resolution of a finite length module, then $\Phi(\FF,\cE)$ will be a complex of $A$-modules with finite length homology, but it will generally fail to be a resolution.  
\begin{figure}
\begin{tikzpicture}[scale=1.2]
%% first cone
\draw[-](.5,.5)--(1,3);
\draw[-](.5,.5)--(2,2.5);
\draw[-](.5,.5)--(3,2.5);
\draw[-](.5,.5)--(3.6,2.8);
\draw[-](.5,.5)--(2.5,2.5);
\draw(1.5,3.0) node {$\bullet$};
\draw(1.7,3.0) node {$\beta$};
\draw(2.2,1.0) node {$\BBQ^{n+1}(S)$};
\draw[dashed,-](.5,.5)--(3.2,3.5);
\draw[dashed,-,thick](.5,.5)--(2.2,3.5);
\draw[-](1,3)--(2,2.5)--(3,2.5)--(3.6,2.8)--(3.2,3.5)--(2.2,3.5)--cycle;
%% the cross
\draw[-] (3.8,2)--(4.1,2.3);
\draw[-] (4.1,2)--(3.8,2.3);
%% second cone
\draw[-](4.5,.5)--(5,3);
\draw[-](4.5,.5)--(5.2,2.5);
\draw(6.0,2.8) node {$\bullet$};
\draw(6.2,2.8) node {$\gamma$};
\draw(6.0,1.0) node {$\CQ^0(\PP^{n})$};
\draw[-](4.5,.5)--(6.5,2.5);
\draw[-](4.5,.5)--(7.1,2.8);
\draw[-](4.5,.5)--(6.5,2.5);
\draw[dashed,-](4.5,.5)--(7.2,3.5);
\draw[dashed,-,thick](4.5,.5)--(6.2,3.5);
\draw[-](5,3)--(5.2,2.5)--(6.5,2.5)--(7.1,2.8)--(7.2,3.5)--(6.2,3.5)--cycle;
%%the arrow
\draw[->,thick](7,2.1)--(9,2.1);
\draw(8,2.4) node {$[\ , \ ]$};
%% third cone
%\draw[-](9.5,.5)--(10,3);
\draw[-](9.8,.8)--(9.8,2.5);
\draw[-](9.8,.8)--(11.8,2.5);
%\draw[-](9.5,.5)--(10.4,2.8);
%\draw[-](9.5,.5)--(11.5,2.5);
\draw[dashed,-](9.8,.8)--(12.1,3.0);
\draw[dashed,-,thick](9.8,.8)--(10.4,3.0);
\draw(10.2,2.1) node {$\bullet$};
\draw(10.7,2.1) node {$[\beta,\gamma]$};
\draw(11.5,1.0) node {$\BBQ^{1}(A)$};
\draw[-](9.8,2.5)--(11.8,2.5)--(12.1,3.0)--(10.4,3.0)--cycle;
\end{tikzpicture}
\caption{The ``duality'' between Betti tables and cohomology tables involves three cones.  Namely, given the Betti table $\beta(\FF)$ of a complex of free $S$-modules, and the cohomology table $\gamma(\cE)$ of a complex of coherent sheaves on $\PP^n$, our pairing produces the Betti table $\beta(\Phi(\FF,\cE))$ of a complex free $A$-modules.
}
\label{fig:bracket}
\end{figure}

\subsection*{Comparing Complexes and Resolutions} Here is a consequence of the analysis of Betti tables allowed by this categorification: If every bounded complex of free $S$-modules were quasi-isomorphic to its homology---which is not the case except when $n=0$, that is $S$ is the polynomial ring in just 1 variable---then the Betti table of a complex would be the sum of the Betti tables of the resolutions of its homology.  We show that, in great generality, the Betti table is  a sum of Betti tables of resolutions, but with rational, not integral coefficients, and not necessarily of the original homology modules. 

Here, for simplicity, is the special case of this result when the homology has finite length. 
%
%\begin{cor}\label{cor:decompose}
%Let $\FF\in \DD^b(S)$.  If $\FF$ 
%\begin{enumerate}
%	\item  If $\FF$ has finite length homology, then $\beta(\FF)$ may be written as a positive rational combination of Betti tables of shifted free resolutions
%	\[\beta(\FF)=\sum_{i=0}^s \beta(M^i)[i]\]
%	 where each module $M^i$ has finite length.
%	\item  If $\codim H^i\FF\geq i$ then $\beta(\FF)$ may be written as a positive rational combination of Betti tables of shifted free resolutions
%\[\beta(\FF)=\sum_{i=0}^s \beta(M^i)[i]\]
%where $\codim(M^i)\geq i$ for all $i$.
%\end{enumerate}
%As in the case of resolutions, the decomposition is algorithmic and, in a certain sense, unique.	
%\end{cor}
\begin{cor}\label{cor:decompose}
Let $\FF\in \DD^b(S)$ have finite length homology.  Then $\beta(\FF)$ is a positive rational combination of Betti tables of shifted free resolutions of modules of finite length (as in the case of resolutions, the decomposition is algorithmic and, in a certain sense, unique.)
\end{cor}

The full statement and proof are given in Theorem~\ref{thm:extremal rays refined}, which implies the known results about decompositions of Betti tables
of minimal free resolutions from \cites{eis-schrey1,boij-sod2}.
The denominators of the coefficients involved in the decomposition may be seen as a measure of the extent to which the complex is not quasi-isomorphic to its homology. 

By convention we display the Betti table of $\FF$ as a table
of integers where the element of the $i$-th column and $j$-th row is $\beta_{i,i+j}\FF$, and we replace each zeros with $-$. For clarity we often decorate the $(0,0)$ entry
with a superscript $\circ$.

\begin{example}
Let $S=\kk[x,y]$ and consider the complex:
\[
\FF := \left[S^1\overset{\left(\begin{smallmatrix}x&y\end{smallmatrix}\right)}{\xlongleftarrow{\hspace*{1.1cm}}} S^2(-1)\overset{\left(\begin{smallmatrix}-y^2&xy\\xy&-x^2\end{smallmatrix}\right)}{\xlongleftarrow{\hspace*{1.1cm}}} S^2(-3)\overset{\left(\begin{smallmatrix}y\\x\end{smallmatrix}\right)}{\xlongleftarrow{\hspace*{1.1cm}}} S^1(-4)\right],
\]
which has finite length homology $H_{0}\FF = \kk,\ H_{1}\FF = \kk(-2)$, and the minimal free resolution of $S/(x,y)^{2}$, which 
is
\[
\bG := 
\left[S^1\overset{\left(\begin{smallmatrix}x^{2}&xy&y^{2}\end{smallmatrix}\right)}
{\xlongleftarrow{\hspace*{1.1cm}}} 
S^3(-2)\overset{\left(\begin{smallmatrix}y&0\\-x&y\\0&-x\end{smallmatrix}\right)}{\xlongleftarrow{\hspace*{1.1cm}}} S^2(-3)\right].
\]
The Betti table
$$
\beta(\FF)=\begin{pmatrix} 1^\circ&2&-&-\\-&-&2&1\end{pmatrix}
$$
decomposes as a rational combination of the Betti table of $\bG$ shifted in 
homological degree by 1,
$$
\beta(\bG[1]) =\begin{pmatrix} -^{\circ}&1&-&-\\-&-&3&2\end{pmatrix},
$$
and the Betti table of the dual of $\bG$, 
$$
\beta(\bG^{*}) = \begin{pmatrix} 2^\circ&3&-\\-&-&1\end{pmatrix}.
$$
In fact, as one sees immediately,
\[
\beta(\FF)=
\frac{1}{2}\beta(\bG[1])
+
\frac{1}{2}\beta(\bG^{*}).
\]
By contrast, $\beta(\FF)$ \emph{cannot} be written as a positive \emph{integral} combination of Betti tables of resolutions of modules of finite length: by Hilbert's Syzygy Theorem the Betti table of $\FF$  is not equal to any Betti table of a resolution, since $\FF$ has length 3; and the sum of the Betti numbers of any resolution of a nonzero module of finite length is at least 4, while the sum of the Betti numbers of $\FF$ is $6<2\cdot 4$.
\end{example}
\david{I removed the second example here; I'd rather move on to the other applications!}
%To give a sense of the range of further examples covered by Theorem~\ref{thm:extremal rays refined}, we include one additional special case.\daniel{I have mixed feelings about this corollary\dots}
%
%\begin{cor}\label{cor:decompose2}
%Let $\FF=[\FF_0\gets \dots \gets \FF_p]\in \DD^b(S)$ have the property that the $i$-th homology of $\FF$ has codimension at least $i$, for all $i\geq 0$.  Then $\beta(\FF)$ is a positive rational combination of Betti tables
%\[\beta(\FF)=\sum_{i=0}^s c_i\beta(M^i)[i] \quad \text{ with } c_i\in \QQ_{\geq 0},\]
%where $\codim(M^i)\geq i$ for all $i$. 
%\end{cor}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection*{Beyond Polynomial Rings}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
It turns out that our description of the cone of Betti tables of bounded complexes
extends to a wide class of rings in the following way. Let $f:X\to \PP^{n}$ be a finite
morphism from a projective variety of dimension $n$, and set $L:=f^*\cO(1)$. 
Write $R=R(X,L)=\oplus_{e\in \mathbb N} H^0(X,L^{\otimes e})$ for the \emph{section ring}
of $L$.

We say that $\cU$ is an \defi{Ulrich sheaf} for $f$ if $f_*(\cU)\cong \cO_{\PP^n}^r$ for some $r>0$.  It was pointed out in \cite[Theorem~5]{eis-schrey-abel} that the existence of an Ulrich sheaf for $f$ implies that  the cone of cohomology tables of vector bundles on $X$ is the same as that on $\PP^{n}$. (The theorem is stated there in the special case when $L$ is very ample, but the proof
carries over to the more general situation.) The situation for Betti tables of resolutions over $R$ is not at all analogous to the situation of resolutions over $S$. But we prove a complete analogy for bounded complexes with finite length homology:

\begin{cor}\label{cor:isom cones}
If $f:X\to \P^{n}$ is a  finite map from an $n$-dimensional variety and $X$ admits an Ulrich sheaf for $f$, then the cone of Betti tables
of bounded free complexes with finite length homology over  the section ring
of $f^{*}\cO_{\P^{n}}$ is the same
as the cone of complexes with finite length homology  on $S$. 
\end{cor}

\begin{example}\label{ex:elliptic}
Let $E$ be an elliptic curve and let $L=2P$, where $p$ is any point of $E$.  The map $f$ corresponding to the complete
linear series $|L|$ maps $E$ two-to-one to $\P^{1}$. The ring $R(E,L)$ has the form
$\kk[x_1,x_2,y]/(g(x_{1},x_{2},y))$  where $\deg(x_i)=1$, $\deg(y)=2$, and $g$ is a polynomial
of total weight 8.
%
%$\kk[x_1,x_2,y]/(y^{2}-g(x_{1},x_{2}))$  where $\deg(x_i)=1$ and $\deg(y)=2$. \daniel{The old version of this example had a serious typo, I think.  Does
%this presentation of $R$ seem correct?}
\david{Let $D$ be the divisor of $y$, so that
$D$ is NOT a sum of fibers of $|2p|: E\to \P^{1}$. We may as well choose $y$ so that it does not
vanish on any complete fiber. Clearly there is 1 relation among the 9 products of the $x_{i}$ and $y$ in $|8p|$. But any section in the vector space $(x_{1}, x_{2})(y, x_{1}, x_{2})$ vanishes
on at least one fiber. However, $y$ can be chosen to vanish on no pair of points in the fiber, so $y^{2}$ is outside this vector space. In this case there is no relation of the type specified,
and I don't think you can produce one by changing $y$ (you can only do so by adding a linear
combination of things in $(x_{1}, x_{2})^{2}$.) Thus I think the relation has to be written
as above.}

If $P\neq Q\in E$ then the sheaf $L(P-Q)$ is an Ulrich sheaf for $f$. Thus the cone of
Betti tables of bounded free complexes with finite length homology over $R$ is the same
as the corresponding cone over $\P^{1}$.

The bundle $L$ in Corollary~\ref{cor:isom cones} must be ample, since the map $L$ is finite.  However, the theorem is not true for an arbitrary ample bundle.  For example, let $p$ be a point on an elliptic curve $E$, and let $R=R(E,p)$.  Since $\dim R_1=h^0(E,\cO_E(p))=1$, there cannot exist a pure complex:
\[
0\gets R^1\gets R^2(-1)\gets R(-2)\gets 0
\]
with finite length homology.
\end{example}

For many of the graded rings $R$ covered by Corollary~\ref{cor:isom cones}, there exist finitely generated $R$-modules of infinite projective dimension.  It would  be interesting to consider the cone of Betti tables of unbounded complexes. \david{we could say what we know.}

\subsection*{The Multigraded Case}
The functor $\Phi$ naturally generalizes to the multigraded case, offering the possibility of extending Boij--S\"oderberg theory to toric varieties.  Let $X$ be any projective toric variety with $\rank \Pic(X)=m$.  Let $R$ be the Cox Ring of $X$, presented as an $\mathbb N^m$-graded ring, and let $I$ be the irrelevant ideal of $R$.  Let $C=\kk[t_1, \dots, t_m]$ by $\mathbb N^m$-graded with irrelevant ideal $(t_1\cdots t_n)$.  We say that a complex $\FF$ over $R$ or $C$ has \defi{irrelevant homology} if its homology is supported on the irrelevant ideal.

Let $\DD^b(R)$ and $\DD^b(C)$ denote the bounded derived categories of finitely generated, multigraded $R$-modules and $C$-modules, respectively.   For $\FF\in \DD^b(R)$ or in $\DD^b(C)$, $i\in \ZZ$, and $\alpha\in \ZZ^m$, we define the multigraded Betti numbers by the formula $\beta_{i,\alpha} \FF:=\dim \Tor_i(\FF,\kk)_{\alpha}$.  Similarly, for $\cE\in \DD^b(X), i\in \ZZ$ and $\alpha\in \ZZ^m$, we define multigraded cohomology numbers by the formula $\gamma_{i,\alpha} \cE:=\dim H^i(X, \cE(\alpha))$.  


For  $\FF\in \DD^b(R)$ let $\widetilde{\FF}$ denote the corresponding complex of coherent sheaves in $\DD^b(X)$.  There exists a functor
\[
\Phi': \DD^b(R)\times \DD^b(X)\to \DD^b(C)
\]
with the following properties:
\begin{theorem}\label{thm:Phimulti}
\begin{enumerate}
	\item\label{thm:Phi':1}  The multigraded Betti table of $\Phi'(\FF,\cE)$ depends only on the multigraded Betti table of $\FF$ and the multigraded cohomology table of $\cE$.
	\item\label{thm:Phi':2}  If $\widetilde{\FF}\otimes \cE$ is exact, then $\Phi(\FF,\cE)$ has irrelevant homology.  This occurs, for instance, whenever $\FF$ is a complex with irrelevant homology and when $\cE$ is a vector bundle.
\end{enumerate}
\end{theorem}



The functor $\Phi'$ thus yields bilinear pairings relating multigraded Betti tables and multigraded cohomology tables, including a pairing of the form:
\begin{equation*}%\tag{**}
\label{eqn:multipairing}
%
\left\{\begin{matrix}
%\text{Cone generated by}\\
\text{Betti tables of} \\ \text{free $R$-complexes with}\\
\text{  irrelevant homology}\end{matrix}\right\}
%
\times 
%
\left\{\begin{matrix}
%\text{Cone generated by}\\
\text{cohomology }\\
\text{tables of vector}\\
\text{ bundles on } X
\end{matrix}\right\}
%
\longrightarrow
\left\{\begin{matrix}
%\text{Cone generated by}\\
\text{Betti tables of} \\ \text{free $C$-complexes with}\\
\text{  irrelevant homology}
\end{matrix}\right\}
\end{equation*}
It seems from this that the cone of free $C$-complexes with irrelevant homology will be easier to study than the cone of free $C$-complexes with finite length homology.  

\subsection*{Structure of this paper}
\david{rewrite this when the paper settles down.} 
 The duality pairing is considered in detail in \S\ref{sec:duality pairing}. In \S\ref{sec:PP0} we analyze the cone $\BBQ^1(A)$ in detail, which provides a sort of base case for our positivity and duality statements.  We prove our main results in \S\ref{sec:general case}.  We then briefly discuss applications to the study of free resolutions in \S\ref{sec:refined}.  Finally, in \S\ref{sec:functor}, we extend these results to new polarized varieties and graded rings.

%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Acknowledgments}
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
We thank Ezra Miller, Christine Berkesch, Ravi Vakil, Rob Lazarsfeld, Bhargav Bhatt,\dots



%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
\section*{Part I: Categorifying the Duality in Boij-S\"oderberg Theory}
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
\section{Background and Notation}\label{sec:notation}
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
We gather some notation and definitions that we will use throughout.  We set $\mathfrak m=(x_0, \dots, x_n)$ to be the homogeneous maximal ideal on $S$.
\begin{defn}
If $\FF\in \DD^b(S)$ is a free complex, then we say that $\FF$ is \defi{minimal} if each differential $\partial: \FF_i\to \FF_{i-1}$ satisfies $\partial(\FF_i)\subseteq \mathfrak m\FF_{i-1}$.
\end{defn}
We may represent any $\FF\in \DD^b(S)$ by a minimal, free complex.  Under this assumption, we may write $\FF_i$ as the direct sum $\FF_i=\oplus_{j\in \ZZ} S(-j)^{\beta_{i,j}\FF}$.


\begin{defn}
A \defi{shifted degree sequence of codimension $\ell$} is a sequence
\[{\bf d}=(\dots, d_i, d_{i+1}, \dots)
\]
with  $d_{i} \in \{\emptyset\}\cup \ZZ\cup \{\infty\}$ and $d_i \leq d_{i+1}-1$, where we make the convention that $\emptyset<d$ for any $d\in \ZZ$, and 
where there are precisely $\ell+1$ entries of $d$ lying in $\ZZ$. 
We define a partial order on shifted degree sequences by the termwise partial order, so $d\leq d'$ if $d_i\leq d_i'$ for all $i$.

As with Betti tables, we use a $\zp$ to indicate homological position zero when writing a degree sequence. 
\end{defn}



Thus for example
$$
(\dots, \emptyset , 0, 1^{\circ}, 3, \infty, \dots) < (\dots, \emptyset , 0, 1, 3^{\circ}, \infty, \dots) 
$$
are shifted degree sequences of codimension 2.

Given any degree sequence $d$, we say that a complex $\FF$ is \defi{pure of type $d$} if, for all $i$ such that $d_i\in \ZZ$, the free module $\FF_i$ is generated entirely in degree $d_i$. 

The existence of pure resolutions (see~\cite{efw} or \cite[\S5]{eis-schrey1}) shows that, for any shifted degree sequence $d$ of codimension $\ell\leq n+1$, there exists a  finite free resolution of a Cohen-Macaulay module over $S$ that is a pure complex of type $d$.  \david{maybe remind the reader that B-S theory says these are the extremal rays of the cone of Betti tables of resolutions?}

%Thus, for each degree sequence $d$ of codimension $\ell$, we may fix some pure, Cohen--Macaulay complex $\FF_d$ of type $d$ and codimension $\ell$.

If $P$ is some property that may be applied to a graded $S$-module, we extend the definition to the derived category by saying that $\FF \in \DD^b(S)$ has property $P$ if the direct sum of the homology modules of $\FF$ have this property. We similarly take the definition of any property that may be applied to a coherent sheaf, and we extend this to any $\cE\in \DD^b(\PP^n)$.  \daniel{do we need root sequence definitions here?}

\begin{defn}
We index complexes in $\DD^b(S)$ homologically as in $\FF=[\dots \gets \FF_0\gets \FF_1\gets \dots]$.  For any $k\in \ZZ$, we define a \defi{shift} of $\FF$, denoted $\FF[k]$, as the complex obtained by shifting the indices in the following way:  $(\FF[k])_i=\FF_{i-k}$.
\end{defn}

We say that $\FF\in \DD^b(S)$ and $\cE\in \DD^b(\PP^n)$ are \defi{homologically transverse} if $\widetilde{\FF}\otimes \cE$ is exact.

\david{this definition of homologically transverse isn't quite general enough: in section 6 we want to apply it to the case where we'll deduce $H_{i} = 0$ for $i\geq 0$} 

%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
\section{The Pairing $\Phi$}\label{sec:duality pairing}
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%

As before, set $A= \kk[t]$. Let 
$\sigma: S\to S\otimes A = S[t]$
be the homomorphism defined by $\sigma(x_{i})=x_{i}t$. 
We write $-\otimes_\sigma S[t]$ to denote tensoring over $S$ with $S[t]$ using the structure
given by $\sigma$. Note that $\sigma$ is not a flat map---it is not even equidimensional.

If $F$ is a graded  $S$-module, then 
$$
F\otimes_{\sigma} S[t]
$$
is a bigraded $S[t]$ module.
Thus we may define a functor $\tau$ on derived
categories that takes a graded complex of free $S$-modules $\FF$ to
$$
\tau(\FF): =\widetilde \FF \otimes_{\sigma}\cO_{\PP^{n}\times \AA^{1}},
$$
a complex of graded sheaves on $\PP^{n}\times \AA^{1}$, with the grading coming from degree in $t$, the coordinate on $\AA^{1}$. For example, if 
$$
\FF: 0\rTo S(-d)\rTo^{f}S\rTo 0
$$
where $f$ is a form of degree $d$, then
$$
\tau(\FF): 0\rTo \cO_{\PP^{n}}(-d)\boxtimes A(-d)\rTo^{t^{d}f}\cO_{\PP^{n}}\boxtimes A \rTo 0
$$
where $P\boxtimes Q$ denotes the tensor product of the pullbacks of $P$ and $Q$ from
$\PP^{n}$ and $\AA^{1}$, respectively. This description of $\tau$ could 
be extended to graded complexes of arbitrary finitely generated graded modules
at the expense of replacing the tensor product with a derived tensor product, but we
will never need this.

%\begin{defn} The functor $\Phi: D^{b}(\P^{n}) \times D^{b}(S) \to D^{b}(A)$ is given by:
%$$
%\Phi(\cE,\FF) = R\pi_{*} \left(\tau_{0}(\cE)\otimes_{\P^{n}\times\AA^{1}} \tau_{1}(\FF)\right)
%$$
%where $\pi: \PP^{n}\times \AA^{1}\to \AA^{1}$ is the projection.
%\end{defn}

\begin{defn} \label{defn:product} The functor $\Phi: \DD^{b}(S)\times \DD^b \to \DD^{b}(A)$ is given by:
$$
\Phi(\FF,\cE) = Rp_{2*} \bigl(\tau(\FF)\otimes_{\P^{n}\times\AA^{1}} (\cE\boxtimes \cO_{\AA^{1}}) \bigr)
$$
where $\FF$ denotes a graded  complex of finitely generated free $S$-modules and
$p_2: \PP^{n}\times \AA^{1}\to \AA^{1}$ is the projection. We will often write
$\FF\cdot \cE$ for $\Phi(\FF,\cE)$.
\end{defn}
We sometimes omit $\Phi$ from the notation, and simply write 
$\FF\cdot \cE:=\Phi(\FF,\cE)$.

For those comfortable with stacks, Definition~\ref{defn:product}
could be rephrased as follows. Consider the commutative diagram:
\[
\xymatrix{
\PP^n&\PP^{n}\times [\AA^1/\GG_m]\ar[l]_-{\pi_{1}} \ar[r]^-{\Sigma} \ar[d]^{\pi_2}&[\AA^{n+1}/\GG_m]\\
&[\AA^1/\GG_m]&%[\Spec(\kk)/\GG_m]\ar[l]_{o}
}
\]
where $\Sigma$ is the morphism induced by $\sigma$ and the maps $\pi_1$ and $\pi_2$ are the projections.  We could define $\Phi(\FF,\cE)$ to be $R\pi_{2*}\left( \Sigma^*\FF\otimes \pi_{1}^{*}\cE\right)\in \DD^b([\AA^1/\GG_m])$.

To see why this is an equivalent definition, note first  that there is an equivalence of categories (given by pullback/descent) between coherent sheaves on $[\AA^1/\GG_m]$ and graded, finitely generated $A$-modules. Further, since the covering map $\AA^1\to [\AA^1/\GG_m]$ is flat, cohomology commutes with base change (see \cite[0765]{stacks-project}) for the diagram
\[
\xymatrix{
\PP^n\times \AA^1\ar[r]\ar[d]^-{p_2}&\PP^{n}\times [\AA^1/\GG_m]\ar[d]^{\pi_2}\\
\AA^1\ar[r]&[\AA^1/\GG_m].
}
\]
Thus, the pullback of $R\pi_{2*}\left( \Sigma^*\FF\otimes \pi_{1}^{*}\cE\right)$ is quasi-isomorphic 
to $\Phi(\FF,\cE)$ as defined in Definition \ref{defn:product}.

Here is a sample computation of $\Phi$: 

\begin{example} Let 
$$
\bK = \bigl[ S\lTo S^{n+1}(-1) \lTo \wedge^{2}(S^{n+1})(-2) \lTo\cdots\lTo S(-n-1)\bigr]
$$
be the Koszul complex, the minimal free resolution of $\kk$, and take
$\cE = \cO_{\PP^{n}}$, so that 
$$
\bK \cdot \cE = Rp_{2*}\tau(\bK).$$  
There is a spectral sequence converging to $Rp_{2*}(\widetilde {\sigma^{*}\bK})\otimes \cE$
whose $^{2}E$ page has in the $(i,j)$ position the $i$-th homology of the complex
of $j$-th cohomology modules of the terms in $\bK$. But since
$$
\widetilde {\sigma^{*} S(-a)} \cong \cO_{\PP^{n}}(-a)\otimes A(-a),
$$
the terms on this page all vanish except for
$$
H^{0} (\widetilde{\bK_{0}}) = H^{0}(\cO_{\PP^{n}}\boxtimes A) = A,
$$
in cohomological degree 0, and 
$$
H^{n}(\widetilde{\bK_{n+1}}) = H^{n}(\cO_{\PP^{n}}(-n-1)\boxtimes A(-n-1) = A(-n-1)
$$
in cohomological degree $n-(n+1) = -1$.
Thus the complex $\bK \cdot \cE$ has the form
$$
A\lTo^{ut^{n}}A(-n)
$$
for some $u\in \kk$. But the complex $\FF$ has homology of finite length, so the complex $\sigma^{*}\FF \otimes p_{2}^{*}\cE$ has homology annihilated by a power of $t$, and thus $\FF\cdot \cE$ will also have homology annihilated by a power of $t$. It follows that $u\neq 0$, and $\FF\cdot \cO_{\PP^{n}}$ is quasi-isomorphic to the graded $A$-module $A/(t^{n})$, regarded as a complex concentrated in homological degree 0.
\end{example}


%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
\section{The Betti table of $\Phi(\FF,\cE)$}\label{sec:duality pairing}
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
In this section, we prove Theorem~\ref{thm:Phi}.  We begin with the following result, which is a strengthened version of Theorem~\ref{thm:Phi}\eqref{thm:Phi:1}.
\begin{theorem}\label{thm:betti numbers of pairing}
The Betti numbers of $\FF\cdot \cE = \Phi(\FF,\cE)$ are given by the formula:
\[
\beta_{i,j}(\FF\cdot \cE)=\sum_{p-q=i}  \beta_{p,j}(\FF)\gamma_{q,-j}(\cE).
\]
In particular, the Betti table of $\FF\cdot \cE$ only depends on $\beta(\FF)$ and $\gamma(\cE)$.
\end{theorem}


\begin{proof}
Without loss of generality, we assume that $\FF$ is supported entirely in nonnegative homological degrees, so that $\FF=[\FF_0\gets \dots \gets \FF_p]$.  
We may compute $\FF\cdot \cE$ explicitly in terms of a certain spectral sequence for computing $Rp_{2*}$.  First, we consider the double complex $C_{\bullet, \bullet}$ where $C_{i,\bullet}$ is the Cech resolution of $\widetilde{\FF'}_i\otimes \cE'$ on $\PP^n_A$ with respect to the standard Cech cover of $\mathbb P^n$.  If we represent all of the maps in $C_{\bullet, \bullet}$ with matrices, then all of the vertical maps (which are induced by the Cech resolutions) will involve degree $0$ elements, and all of the horizontal maps (which are induced by the maps in $\rho^*\FF$) will involve bihomogeneous elements that are strictly positive in both bidegrees.

Since $\Tot(C_{\bullet, \bullet})$ is a complex of flat $A$-modules that is quasi-isomorphic to $\FF\cdot \cE$, we can obtain the Betti numbers by computing $\Tor(\Tot(C_{\bullet, \bullet}), A/(t))$.  When we tensor by $A/(t)$, the vertical maps of $C_{\bullet, \bullet}$ are unchanged, but the horizontal maps all go to $0$.  
Hence, one spectral sequence degenerates, so the $i$th homology of $\Tot(C_{\bullet,\bullet})/(t)$ equals the sum 
\[
\HH^i(\Tot(C_{\bullet,\bullet})/(t))\cong \bigoplus_{j} \HH^j_{\text{vert}}(C_{i+j,\bullet})
\]

Now we compute the other spectral sequence.
Recall that $\FF_i=\oplus_{j\in \ZZ} S(-j)^{\beta_{i,j}(\FF)}$.  For brevity, we use $\beta_{i,j}:=\beta_{i,j}(\FF)$, and we may write $\FF_i'\otimes \cE\cong \bigoplus_{j\in \ZZ} \cE(-j)^{\beta_{i,j}}\boxtimes A(-j)^{\beta_{i,j}}$.

After taking the vertical homology of $C_{\bullet, \bullet}$, we obtain:
\[
\xymatrix{
\bigoplus_{j} H^n(\cE(-j)^{\beta_{0,j}})\otimes A(-j)^{\beta_{0,j}}&\bigoplus_{j} H^n(\cE(-j)^{\beta_{1,j}})\otimes A(-j)^{\beta_{1,j}}\ar[l]&\dots\ar[l]\\
\vdots & \vdots&\\
\bigoplus_{j} H^1(\cE(-j)^{\beta_{0,j}})\otimes A(-j)^{\beta_{0,j}}&\bigoplus_{j} H^1(\cE(-j)^{\beta_{1,j}})\otimes A(-j)^{\beta_{1,j}}\ar[l]&\dots\ar[l]\\
\bigoplus_{j} H^0( \cE(-j)^{\beta_{0,j}})\otimes A(-j)^{\beta_{0,j}}&\bigoplus_{j} H^0(\cE(-j)^{\beta_{1,j}})\otimes A(-j)^{\beta_{1,j}}\ar[l]&\dots\ar[l]
}
\]
We conclude that
\[
\Tor^i_A(\FF\cdot \cE, A/(t))\cong \HH^i(\Tot(C_{\bullet,\bullet})/(t))\cong \bigoplus_{p-q=i} \bigoplus_{j} H^q(\cO(-j)^{\beta_{p,j}}\otimes \cE)\otimes A(-j)^{\beta_{p,j}},
\]
which proves the formula.
\end{proof}

For example, we can recover the Betti numbers of a complex $\FF$  or the cohomology
table of a sheaf $\cE$ from the values of the pairing:
\begin{cor} 
We have:
\begin{enumerate}
\item 
 $\beta_{i,j}(\FF) = \beta_{i,j}(\FF\cdot \cO_{\P^{n}}(j))$ for all $i,j$, where $\cO_{\PP^n}(j)$ is regarded as a complex concentrated in homological degree 0.
\item $h^{i}(\cE(j)) = \beta_{-i,-j}(S(j)\cdot \cE)$, for all $i,j$, where $S(j)$ is regarded as a complex concentrated in homological degree 0.
\end{enumerate}
%\qed
\end{cor}


We will focus in this paper on free complexes, and we will need to use the definition of $\Phi$
only in the special case where $\cE$ is a vector bundle, or more generally a sheaf that is \defi{homologically transverse} to $\FF$, in the sense
that $\widetilde \FF\otimes \cE $ is exact.  
% we will often apply the following observation:

\begin{prop}\label{prop:exact}
Let $\FF\in \DD^b(S)$ and $\cE\in \DD^b(\PP^n)$.  If $\widetilde \FF\otimes \cE$ is exact, then the homology of the complex $\Phi(\FF,\cE)$ has finite length.
\end{prop}

\begin{proof} It suffices to show that the homology of $\Phi(\FF,\cE)$ is annihilated by
a power of $t$. After inverting $t$ the map $\sigma$ becomes the usual inclusion $S\subset S[t,t^{-1}]$
composed with the invertible change of variables $x_{i}\mapsto x_{i}t$. Thus the complex 
$$
\Gbull:=\bigl(\widetilde\FF\otimes_{\sigma}\cO_{\PP^{n}\times \Spec A[t,t^{-1}]}\bigr)
\otimes_{\PP^{n}\times \Spec A[t,t^{-1}]}
\cE \cong \widetilde \FF \otimes \cE \otimes \cO_{\Spec A[t,t^{-1}]}
$$
has no homology. It follows by a spectral sequence computation that 
the complex $R\pi_{2*}\GG$ on $\Spec A[t,t^{-1}]$ has no homology. By flat base change,
this is equal to the restriction of $\Phi(\FF,\cE)$ on the open set $t^{-1}$, and we see that the homology
of $\Phi(\FF,\cE)$ is annihilated by a power of $t$, as required.
\end{proof}

%\daniel{I think we can safely drop this example.}
%\begin{example}
%Let $S=\kk[x_1,x_2, x_3]$ and let $\FF$ be a positive, free complex with
%\[
%\beta(\FF)=\begin{pmatrix} 4^\zp&8&6&-\\-&6&8&4\end{pmatrix}
%\]
%%of the form:
%%\[
%%\FF=\left[\underline{{S}}^4 \gets \begin{matrix} S^8(-1)\\ \oplus \\ S^6(-2)\end{matrix}\gets  \begin{matrix} S^6(-2)\\ \oplus \\ S^8(-3)\end{matrix}
%%\gets S^4(-4)\gets 0.\right]
%%\]
%%Then $\FF\cdot \cO_{\PP^2}$ is a complex of the form:
%%\[
%%\FF\cdot \cF
%%%=\left[\begin{matrix} \underline{A}\otimes_{\kk} H^0(\cO^4)\\ \oplus \\ A(-3)\otimes_{\kk} H^2(\cO(-3)^8) \end{matrix}\gets A(-4)\otimes_{\kk} H^2(\cO(-4)^4)\gets 0\right
%%=\left[ \begin{matrix} A^4\\ \oplus \\ A^8(-3) \end{matrix} \gets A^{12}(-4)\right].
%%\]
%Let $\cE$ be a rank $2$ supernatural bundle of type $(0,-4)$, so that
%\[
%\gamma(\cE)=
%\begin{vmatrix}
%\dots&21&12&5&-&-&-&-&-&\dots\\
%\dots&-&-&-&3&4&3&-&-&\dots\\
%\dots&-&-&-&-&-&-^\circ&5&12&\dots
%\end{vmatrix}
%\]
%We then have
%\[
%\beta(\FF\cdot \cE)=
%\begin{pmatrix}
%-&-^\circ\\
%24&24\\
%24&24
%\end{pmatrix}.
%\]
%\end{example}

\section*{Part II: Applications}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Complexes with Homology}\label{sec:refined}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
The main result of this section and the next two is Theorem~\ref{thm:extremal rays refined}, which provides refined analogues of the main decomposition results in Boij--S\"oderberg, including those of \cites{eis-schrey1,boij-sod2} (see Example~\ref{ex:resolutions} below).  

\david{maybe we should allow unimodal sequences, to get at the monad case?}
\begin{defn} A \defi{codimension sequence} is a
a doubly infinite, nondecreasing or nonincreasing sequence 
$$
\bb=(\dots, b_{-1}, b_{0}^{\circ}, b_{1}, \dots )
$$
where  
$$
b_{i}\in \{\emptyset\} \cup \{0,1,\dots,n+1\}\cup \{\infty\}
$$
for each $i$, and we adopt the convention that $\emptyset<0$.   We say that a
minimal graded free complex $\FF$ over $S$ (or the element of $D^{b}(S)$ that it represents) is \defi{compatible with $\bb$} if 
\[
\codim \HH^i(\FF) \geq b_i, \text{ for all } i
\]
and if $\FF_i=0$ whenever $b_i=\emptyset$.
\end{defn}

\begin{example}
Let $\FF=[\FF_0\gets \dots \gets \FF_p]$ be the minimal free resolution of a module of codimension $c$.  The complex $\FF$ is compatible with $\bb=(\dots, 0,c-1^\circ,c,c+5,\dots)$.  However, $\FF$ is not compatible with $\bb=(\dots,c+1^\circ,c+1,\dots)$.  
\end{example}

Here are the cones of Betti tables and cohomology tables we will work with:
\begin{defn}\label{defn:cones}
We write $\BBQ^{\bb}(S)$ for the subcone of $\VV$ spanned by $\beta(\FF)$ as $\FF$ ranges over all elements of $\DD^b(S)$ that are compatible with $\bb$.  In case  $\bb_i=k$ for all $i$ we write $\BBQ^k(S)$ in place of $B^{\bb}(S)$.

For any $k=0, \dots, n$, we define $\CQ^k(\PP^n)$ to be the subcone of $\WW$ spanned by all $\cE\in \DD^b(\PP^n)$ satisfying $\codim(\cE)\geq k$.
\end{defn}

\begin{defn}\label{defn:deg compatible}
Suppose that $\bb$ is a nondecreasing (respectively nonincreasing) codimension sequence 
and ${\bf d}$ is a degree sequence  of codimension $\ell$. Let $k$ be the smallest index
such that $d_{k}\in \ZZ$. We say that $\dd$ is \defi{compatible with $\bb$} if $\bb_k\leq \ell\leq \bb_{k+1}$  (respectively, if $\bb_k\geq \ell\geq \bb_{k+1}$).
\end{defn}

Our main result is a description of the structure of a simplicial fan for $\BBQ^{\bb}(S)$ in terms of  Betti tables of pure resolutions.  

\begin{thm}\label{thm:extremal rays refined}
For any $\bb$ as above the cone $\BBQ^{\bb}(S)$ is locally polyhedral, and there is a natural bijection:
\[
\left\{
\begin{matrix}
\text{Extremal rays of }\\
\text{the cone } \BBQ^{\bb}(S)
\end{matrix}
\right\}
\longleftrightarrow
\left\{
\begin{matrix}
\text{Shifted degree sequences }\\
\text{ compatible with $\bb$}
\end{matrix}
\right\},
\]
where the shifted degree sequence $d$ corresponds to the ray spanned by 
the Betti table of any shifted pure free resolution of type $d$of a Cohen-Macaulay module. Further, the cone $\BBQ^{\bb}(S)$ has a simplicial fan structure, where the simplices correspond to chains of shifted degree sequences.
\end{thm}

Here by the statement that $\BBQ^{\bb}(S)$ is \defi{locally polyhedral} we mean that,
for any integer $N$,
the (finite dimensional) cone spanned by the Betti tables in $\BBQ^{\bb}(S)$ having
all free modules generated by elements of degrees between $-N$ and $N$ is polyhedral.

The proof of Theorem~\ref{thm:extremal rays refined} involves two essential steps.  First, in \S\ref{sec:A}, we provide a detailed description of cones of Betti tables on $A$.  Since $\DD^b(A)$ is the target of the pairing $\Phi$, these results will provide a base case for our main results.  Second, in \S\ref{sec:refined}, 
we use the nonnegative functionals obtained by combining  \S\ref{sec:A} with Theorem~\ref{thm:Phi} to complete the proof of Theorem~\ref{thm:extremal rays refined}. We postpone the details to the next section.

\begin{example}  
%There is a necessary subtlety in Definition~\ref{defn:deg compatible}, which is
%\emph{not} equivalent to asking that $\FF_d$ be compatible with $\bb$. 
%For instance, let

 Consider the codimension sequence $\bb=(\dots, \emptyset,0^\circ,0,\infty,\dots)$ and the degree sequence $\dd=(\dots, \emptyset,0^\circ ,1,\infty,\dots)$, which has codimension $\ell = 1$.  The Betti table 
 $(1^\circ, 1)$ of the complex $\FF=\left[ S^{1^\circ}\lTo^{x_{0}} S^1(-1)\right]$ is in $BBQ^{\bb}$.
 As such, the decomposition guaranteed by Theorem~\ref{thm:extremal rays refined} is
 $\beta(\FF) = (1^{\circ}, -) + (-^{\circ}, 1)$. Of course we might also decompose $\beta(\FF)$
 as the Betti table $(1^{\circ}, 1)$ of a single pure resolution ($\FF$ itself!). This does \emph{not} contradict the uniqueness statement of the Theorem because $\dd$ is not compatible with $\bb$
 since $1= \ell \not\leq b_{1}= 0$.
\end{example}

%compatible with $\bb$
% 
% 
% , whereas the degree sequence $d$ is not compatible with $\bb$.
%
%This distinction is necessary in order to obtain the uniquesness of decompositions of Betti tables in Theorem~\ref{thm:extremal rays refined}.  Otherwise, in this case, $\FF_d$ would have two decompositions into pure tables:
%\[
%\beta(\FF_d)=\begin{pmatrix}
%1^\circ & 1
%\end{pmatrix}
%\quad \text{ or } \quad
%\beta(\FF_d)=
%\begin{pmatrix}
%1^\circ & -
%\end{pmatrix}
%+
%\begin{pmatrix}
%-^\circ & 1
%\end{pmatrix}.
%\]
%

\begin{cor}\label{cor:decompose refined}
Let $\bb$ be a nondecreasing or nonincreasing sequence, and let $\FF\in \DD^b(S)$ be compatible with $\bb$.  Then there exist modules $M^k$ of codimension $\geq \bb_k$ and nonnegative rational numbers $a_k\in \QQ_{\geq 0}$ such that
\[
\beta(\FF)=\sum_{k\in \ZZ} \beta(M^k[k]).
\]
\end{cor}

Several special cases of Theorem~\ref{thm:extremal rays refined} are of particular interest.

\begin{cor}\label{cor:uniform}
For any $k=0,\dots, n+1$, there is a natural bijection:
\[
\left\{
\begin{matrix}
\text{Extremal rays of }\\
\text{the cone } \BBQ^{k}(S)
\end{matrix}
\right\}
\longleftrightarrow
\left\{
\begin{matrix}
\text{Shifted degree sequences }\\
\text{ of codimension $k$}
\end{matrix}
\right\},
\]
where the shifted degree sequence $d$ corresponds to the ray spanned by the Betti table of any pure, Cohen-Macaulay complex of type $d$. Further, the cone $\BBQ^{k}(S)$ has a simplicial fan structure, where the simplices correspond to chains of shifted degree sequences.
\end{cor}



\begin{example}[Resolutions]\label{ex:resolutions}
%Let $\bb$ be the nondecreasing sequence $\bb=(\dots, \emptyset, n+1^*, \infty, \dots )$, where the asterisk indicates homological position $0$.  A complex $\FF$ is compatible with $\bb$ if and only if $\FF$ is the minimal free resolution of a finite length $S$-module.  Hence, for this value of $\bb$, Theorem~\ref{thm:extremal rays refined} recovers \cite[Theorem~0.2]{eis-schrey1}.
%
If $\bb=(\dots, \emptyset, 0^\zp, \infty, \dots)$ then a complex $\FF$ is compatible with $\bb$ if and only if $\FF$ is the minimal free resolution of an arbitrary $S$-module.  Hence, for this value of $\bb$, Theorem~\ref{thm:extremal rays refined} recovers the main results of \cite{boij-sod2}.
\end{example}
%
%
%\begin{example}[Complexes with finite length homology]\label{ex:fl hom}
%If $\bb=(\dots, n+1, n+1^\zp, n+1, \dots)$ then a complex $\FF$ is compatible with $\bb$ if and only if the homology modules of $\FF$ have finite length. Hence, for this value of $\bb$, Theorem~\ref{thm:extremal rays refined} implies Corollary~\ref{cor:decompose}.
%\end{example}

\begin{example}[Coresolutions]\label{ex:coresolutions}
Let $\bb$ be the nonincreasing sequence $\bb=(\dots, n+1, \dots, n+1, 0^\zp,\emptyset, \dots)$.  For any sheaf $\cE$ on $\PP^n$, let $\FF=[\FF_{-p}\gets \dots \gets \FF_0]$ be a positive, free complex such that 
\[
0\gets \widetilde{\FF}_{-p}\gets \dots \gets \widetilde{\FF}_0\gets \cE\gets 0
\]
is a coresolution of $\cE$.  Then $\FF$ is compatible with $\bb$ and hence $\beta(\FF)$ lies in $\BBQ^{\bb}(S)$.  

For instance, if $S=\kk[x_0, \dots, x_4]$ and $\cE=\bigwedge^3 \Omega_{\PP^4}$, then $\cE$ admits a coresolution:
\[
0\gets \cO_{\PP^4}\gets  \cO_{\PP^4}^5(-1)\gets  \cO_{\PP^4}^{10}(-2)\gets  \cO_{\PP^4}^{10}(-3)\gets \bigwedge^3 \Omega_{\PP^4}\gets 0.
\]
If $\FF$ is the corresponding positive, free complex of $S$-modules, then the decomposition of $\beta(\FF)$ into shifted pure diagrams compatible with $\bb$ is given by
\[
\beta(\FF)=\left(\begin{smallmatrix}-&-&-&-^\zp\\
-&-&-&-\\
-&-&-&-\\
1&5&10&10
\end{smallmatrix}\right)
=\left(\begin{smallmatrix}
-&-&-&-^\zp\\
-&-&-&-\\
-&-&-&-\\1&3&3&1
\end{smallmatrix}\right)
+
\left(\begin{smallmatrix}
-&-&-&-^\zp\\
-&-&-&-\\
-&-&-&-\\-&2&4&2^\zp
\end{smallmatrix}\right)
+
\left(\begin{smallmatrix}
-&-&-&-^\zp\\
-&-&-&-\\
-&-&-&-\\
-&-&3&3
\end{smallmatrix}\right)
+
\left(\begin{smallmatrix}
-&-&-&-^\zp\\
-&-&-&-\\
-&-&-&-\\
-&-&-&4
\end{smallmatrix}\right)
\]
Unlike the case of resolutions in Example~\ref{ex:resolutions}, there exist complexes $\FF$ compatible with $\bb$ such that $\widetilde{\FF}$ is not a coresolution of a coherent sheaf.  For instance, we could also realize $\beta(\FF)$ as above by taking direct sums of shifted Koszul complexes.
\end{example}

\begin{example}[Approximate resolutions]
\daniel{possibly add one more example here.}
\end{example}

\begin{example}[Monads]
\daniel{add a discussion of monads?}
\end{example}







%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
\section{Complexes on $A$}\label{sec:A}
%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%
In order to prove Theorem~\ref{thm:extremal rays refined}, we first consider cones on $A$, which is the target of $\Phi$.  Because the global dimension of $A$ is 1, the structure of $\DD^b(A)$ is simple: any element $\Gbull\in \DD^b(A)$ is quasi-isomorphic to its homology, and the homology $\HH(\Gbull)$ decomposes as
\[
\HH(\Gbull)=\left( \bigoplus_{i,j\in \ZZ} A(-j)[i]^{\lambda_{i,j}(\Gbull)}\right) \bigoplus \left( \bigoplus_{\substack{i,j\in \ZZ\\ k\in \ZZ_{>0}}} (A(-j)[i]/t^k)^{\nu_{i,j,k}(\Gbull)}\right),
\]
for uniquely defined nonnegative integers $\lambda_{i,j}(\Gbull), \nu_{i,j,k}(\Gbull)$.  Hence, as a monoid with respect to direct sum, $\DD^b(A)$ is isomorphic to a free abelian monoid on the countable set of generators $\{\lambda_{i,j} | i,j\in \ZZ\} \cup \{ \nu_{i,j,k}  | i,j\in \ZZ, k\in \ZZ_{>0}\}$. 

Note that a complex $\Gbull$ has finite length homology if and only if $\lambda_{i,j}(\Gbull)=0$ for all $i,j$.  We  define $\DD^b(A)_{\text{tor}}$ as the subcategory of complexes $\Gbull$ where $\lambda_{i,j}(\Gbull)=0$.  We use $\DD^b(A)\otimes_{\ZZ} \QQ$ and $\DD^b(A)_{\text{tor}}\otimes_{\ZZ} \QQ$ for the associated vector spaces.

%
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%\subsection{Complexes on $A$ with finite length homology}\label{sec:PP0}
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%We first prove the special case of Theorem~\ref{thm:extremal rays refined} given by considering complexes of $A$-modules whose homology modules have finite length.  This leads to a description of $\BBQ^1(A)$.  We treat this case separately to help clarify our discussion in \S\ref{sec:duality}--\ref{sec:functionals}, where we discuss the duality of cones induced by $\Phi$ as well as the functionals $\langle -,-\rangle_{\tau,\kappa}$.
%
%\daniel{we could drop this whole subsection, but I was too hesitant to pull the trigger on that.}
%
%%Let $\BBQ^{1}(A)\subseteq U$ be the cone of Betti tables of bounded free complexes over $A$ with 
%%homology of codimension 1---that is to say, with finite length homology. \david{this notation has
%%not been introduced in general yet---do it again when we come to $B^{c}(S)$.}
%%
%\begin{prop}\label{prop:conePP0}
%There is a natural bijection
%\[
%\left\{
%\begin{matrix}
%\text{Extremal rays of }\\
%\text{the cone } \BBQ^{1}(A)
%\end{matrix}
%\right\}
%\longleftrightarrow
%\left\{
%\begin{matrix}
%\text{Shifted degree sequences }\\
%\text{ of codimension $1$}
%\end{matrix}
%\right\}.
%\]
%Further, $\BBQ^1(A)$ has the structure of a simplicial fan, where simplices correspond to chain of shifted degree sequences.  
%\end{prop}
%This proposition also leads to a description of the nonnegative linear functionals on $\BBQ^1(A)$.  To give this halfspace description, we now introduce a graded variant of a partial Euler characteristic.  Given a Betti table in $\UU$, we define $\chi_{\tau,\kappa}$ as the dot product of that Betti table with:
%\[
%\chi_{\tau,\kappa}:=
%\left(
%\begin{array}{cccccccc}
% & \vdots& &\multicolumn{1}{|c}{\vdots}&& \vdots&&\\
%\dots&0&0&\multicolumn{1}{|c}{1}&-1&1&-1&\dots\\
%\dots&0&0&\multicolumn{1}{|c}{1}&-1&1&-1&\dots\\
%\dots&0&0&\multicolumn{1}{|c}{\mathbf{1}}&-1&1&-1&\dots\\ \cline{4-5}
%\dots&0&0&0&0&\multicolumn{1}{|c}{1}&-1&\dots\\
%\dots&0&0&0&0&\multicolumn{1}{|c}{1}&-1&\dots\\
%& \vdots&&\vdots&& \multicolumn{1}{|c}{\vdots}&&\\
%\end{array}
%\right)
%\]
%where the boldface $1$ corresponds $\beta_{\tau,\kappa}$, i.e. the boldface $1$ is in column $\tau$ and row $\tau-\kappa$. The line the snakes through
%the table indicates how $\chi_{\tau,\kappa}$ separates a Betti into two regions.  In the upper region, this is simply computing an Euler characteristic, and in the lower region, it is dot product with the zero matrix.
%%We use the notation $\chi_{\tau,\kappa}$ to suggest that these functionals are  graded variants of the partial Euler characteristic functionals.  
%The functional $\chi_{\tau,\kappa}$ is nonnegative for any complex $\Gbull$ with finite length homology.  
%\begin{lemma}\label{lem:chi nonneg}
%Let $\Gbull\in \DD^b(A)$.  If $\Gbull$ has finite length homology, then:
%\[
%\chi_{\tau,\kappa}(\Gbull)=\sum_{\substack{j,k \\ j< \kappa+1<j+k}} \nu_{\tau,j,k}(\Gbull) + \sum_{\substack{j,k \\ j> \kappa+1}} \nu_{\tau+1,j,k}(\Gbull).
%\]
%In particular, $\chi_{\tau,\kappa}(\Gbull)\geq 0$.
%\end{lemma}
%\begin{proof}
%It suffices to evaluate both sides of the equation on $1$-term complexes $A(i)[j]/t^k$, for all $i,j\in \ZZ$ and $k\in \ZZ_{>0}$, and the statement then follows.
%\end{proof}
%
%A halfspace description of $\BBQ^1(A)$ only involves individual Betti numbers and these graded partial Euler characteristics.
%
%\begin{cor}\label{cor:dualconeA}
%A point $u\in \UU$ lies in $\BBQ^1(A)$ if and only if $u$ satisfies:
%	\begin{enumerate}
%		\item $\chi(u)= 0$.
%		\item $\beta_{i,j}(u)\geq 0$ for all $i,j\in \ZZ$.
%		\item  $\chi_{i,j}(u)\geq 0$ for all $i\in \ZZ$ and $j\in \ZZ$.
%	\end{enumerate}
%\end{cor}
%
%\begin{proof}[Proof of Proposition~\ref{prop:conePP0} and Corollary~\ref{cor:dualconeA}]
%The extremal ray description of $\BBQ^1(A)$ is straightforward.  Namely, the cone $\BBQ^1(A)$ is, by definition, the image of the first orthant of $\DD^b(A)_{\text{tor}}\otimes_{\ZZ} \QQ$ under the map of vector space
%\[
%\DD^b(A)_{\text{tor}}\otimes_{\ZZ} \QQ\to U
%\]
%that sends a complex $\Gbull$ to its Betti table.  Since each generator of $\DD^b(A)_{\text{tor}}$ maps to a distinct extremal ray of $\BBQ^1(A)$, and since there is a natural bijection between the generators of  $\DD^b(A)_{\text{tor}}$ and the shifted degree sequence $d$ of codimension $1$, this immediately proves the bijection stated in Proposition~\ref{prop:conePP0}.
%In addition, Lemma~\ref{lem:chi nonneg} implies that each functional in Corollary~\ref{cor:dualconeA} is nonnegative on $\BBQ^1(A)$.  
%
%To obtain the remaining results, it suffices to show that, if a point $u\in \UU$ satisfies the inequalities in Corollary~\ref{cor:dualconeA}, then we may write $u$ uniquely as a sum of pure tables whose degree sequences form a chain.  It suffices to consider points $u\in \UU$ whose entries are all integral and which have no common factor.  Since all entries of $u$ must be nonnegative, we will then induct on the sum of all of the entries of $u$.  When all entries of $u$ are zero, then $u$ is the empty sum of pure diagrams, and this provides our base case.
%
%Otherwise, $u$ has some nonzero entry.  We fix $(a,b)$ so that $u_{a,b}$ is the top nonzero entry in the rightmost nonzero column of $u$.  We then set $c$ so that $u_{a-1,c}$ is the top nonzero entry in column $a-1$.  We claim that, $c<b$, i.e. that $u$ has the form:
%\[
%u=
%\left(
%\begin{array}{ccccccc}
% & \vdots& \multicolumn{1}{|c}{\vdots}&\vdots& \vdots&&\\
%\dots&u_{a-2,c-2}&\multicolumn{1}{|c}{0}&0&0&\dots\\
%\dots&u_{a-2,c-1}&\multicolumn{1}{|c}{u_{a-1,c}}&0&0&\dots\\
% & \vdots& \multicolumn{1}{|c}{\vdots}&\vdots& \vdots&&\\
%%\dots&u_{a-2,b-4}&u_{a-1,b-3}&0&0&\dots\\
%\dots&u_{a-2,b-3}&\multicolumn{1}{|c}{u_{a-1,b-2}}&0&0&\dots\\
%\dots&u_{a-2,b-2}&\multicolumn{1}{|c}{u_{a-1,b-1}}&u_{a,b}&0&\dots\\ \cline{3-4}
%\dots&u_{a-2,b-1}&u_{a-1,b}&u_{a,b+1}&\multicolumn{1}{|c}{0}&\dots\\
%%\dots&u_{a-2,b}&u_{a-1,b+1}&u_{a,b+2}&0&\dots\\
%& \vdots&\vdots&\vdots& \multicolumn{1}{|c}{\vdots}&&\\
%\end{array}\right).
%\]
%The claim follows from the fact that $\chi_{a-1,b-1}(u)\geq 0$.  Namely, computing $\chi_{a-1,b-1}(u)$
%is the same as computing the Euler characteristic of the region that lies above the line.  Since this must be nonnegative,
%it follows that $c<b$.
%
%We now set
%\[
%u':=u-\beta(A(-c)[-a+1]/t^{b-c}).
%\]
%Since $u$ satisfies the inequalities in Corollary~\ref{cor:dualconeA}, one may verify directly that so does $u'$.  Hence, the induction hypothesis guarantees that we can write $u'$ uniquely as a sum of pure tables whose degree sequences form a chain.  Further, the degree sequence corresponding to $\beta(A(-c)[-a+1]/t^{b-c})$ is less than or equal to any degree sequence that could possibly arise in the decomposition of $u'$, and hence we can use the decomposition of $u'$ to conclude that $u$ decomposes uniquely as a sum of pure tables whose degree sequences form a chain.
%\end{proof}
%
%



%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%\subsection{Refined theory for $A$}\label{sec:refined A}
%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%
%In this section, we will 

We next describe the cones $\BBQ^{\bb}(A)$.
This will provides a base case for positivity results about cones of the form $\BBQ^{\bb}(S)$.

\begin{prop}\label{prop:conePP0 refined}
There is a natural bijection $\BBQ^{\bb}(A)$
\[
\left\{
\begin{matrix}
\text{Extremal rays of }\\
\text{the cone } \BBQ^{\bb}(A)
\end{matrix}
\right\}
\longleftrightarrow
\left\{
\begin{matrix}
\text{Shifted degree sequences }\\
\text{ compatible with $\bb$}
\end{matrix}
\right\}.
\]
Further, $\BBQ^{\bb}(A)$ has the structure of a simplicial fan, where simplices correspond to chain of shifted degree sequences.  
\end{prop}
\david{Let's systematically rename $\chi_{\tau, \kappa}$ a simple $\chi_{i,j}$ ---as is done haphazardly below.}
In the proof of this proposition, it will be useful to define a ``lower facet'' version of the functional $\chi_{\tau,\kappa}$:
\[
\chi^{-}_{\tau,\kappa}:=
\left(
\begin{array}{cccccccc}
 & \vdots& &\multicolumn{1}{|c}{\vdots}&& \vdots&&\\
\dots&-1&1&\multicolumn{1}{|c}{0}&0&0&0&\dots\\
\dots&-1&1&\multicolumn{1}{|c}{0}&0&0&0&\dots\\
\dots&-1&1&\multicolumn{1}{|c}{\mathbf{0}}&0&0&0&\dots\\ \cline{4-5}
\dots&-1&1&-1&1&\multicolumn{1}{|c}{0}&0&\dots\\
\dots&-1&1&-1&1&\multicolumn{1}{|c}{0}&0&\dots\\
& \vdots&&\vdots&& \multicolumn{1}{|c}{\vdots}&&\\
\end{array}
\right).
\]
Here, the boldfaced zero corresponds to $\beta_{\tau,\kappa}$.  
\david{I think the following is nonsense, since $\chi$ is not really the right thing for
shifted complexes!---or rather we need to define it using the first nonzero place.} 
Note that $\chi_{\tau,\kappa}-\chi_{\tau,\kappa}^{-}$ equals $(-1)^{\tau}$ times the total Euler characteristic.
\begin{cor}\label{cor:dualconeA refined}
If $\bb$ is nondecreasing, then a point $u\in \UU$ lies in $\BBQ^{\bb}(A)$ if and only if the following inequalities and equalities hold.
\begin{enumerate}
	\item $\beta_{i,j}(u)=0$ for all $i$ such that $b_i=\emptyset$.  If there does not exist $i$ such that $b_i=0$, then we also include the equation $\chi(u)=0$.
	\item $\beta_{i,j}(u)\geq 0$ for all $i,j\in \ZZ$.
	\item  $\chi_{i,j}(u)\geq 0$ for all $i$ such that $b_i\geq 1$ and for all $j\in \ZZ$.
\end{enumerate}
If $\bb$ is nonincreasing, then a point $u\in \UU$ lies in $\BBQ^{\bb}(A)$ if and only if the following inequalities and equalities hold.
\begin{enumerate}
	\item $\beta_{i,j}(u)=0$ for all $i$ such that $b_i=\emptyset$.  If there does not exist $i$ such that $b_i=0$, then we also include the equation $\chi(u)=0$.
	\item $\beta_{i,j}(u)\geq 0$ for all $i,j\in \ZZ$.
	\item  $\chi^{-}_{i,j}(u)\geq 0$ for all $i$ such that $b_i\geq 1$ and for all $j\in \ZZ$.
\end{enumerate}
\end{cor}
\begin{proof}[Proof of Proposition~\ref{prop:conePP0 refined} and Corollary~\ref{cor:dualconeA refined}]
\david{Having commented out the previous section, the references to it have to be replace in the proof below.} 
%Our proof will largely follow the proofs of Proposition~\ref{prop:conePP0} and Corollary~\ref{cor:dualconeA}.  

We first consider the case that $\bb$ is nondecreasing.  The extremal ray description of $\BBQ^{\bb}(A)$ is straightforward, since any complex $\Gbull$ is quasi-isomorphic to a direct sum of its homology modules.  \david{replace} By an argument entirely analogous to the proof of Lemma~\ref{lem:chi nonneg}, we may conclude that each functional in Corollary~\ref{cor:dualconeA} is nonnegative on $\BBQ^{\bb}(A)$.

To obtain the remaining results for $\bb$, it suffices to show that, if a point $u\in \UU$ satisfies the inequalities in Corollary~\ref{cor:dualconeA refined}, then we may write $u$ uniquely as a sum of pure tables whose degree sequences form a chain.  We may reduce to the case when $u\in \UU$ has all integral entries with no common factor, and we induct on the sum of all of the entries of $u$.  When all entries of $u$ are zero the result is obvious. 

Otherwise, $u$ has some nonzero entry.  We fix $(s,t)$ so that $u_{s,t}$ is the top nonzero entry in the rightmost nonzero column of $u$.  If $b_s=0$, then $\beta(A(-t)[-s])$ is compatible with $\bb$, and we can set $u'=u-\beta(A(-t)[-s])$.  On the other hand, if $b_s>0$, then $\chi_{s-1,t-1}\geq 0$, and \david{replace} we can apply the same argument as in the proof from \S\ref{sec:PP0}.  In either case, $u'$ still satisfies the necessary inequalities, and hence the induction hypothesis guarantees that we can write $u'$ uniquely as a sum of pure tables whose degree sequences form an appropriate chain, and that this extends to a unique decomposition for $u$.

We next consider the case that $\bb$ is nonincreasing.  In this case,  we fix $(s,t)$ so that $u_{s,t}$ is the lowest nonzero entry in the leftmost nonzero column of $u$.  If $b_s=0$, then $\beta(A(-t)[-s])$ is compatible with $\bb$, and we can set $u'=u-\beta(A(-t)[-t])$.  On the other hand, if $b_s\geq 1$, then we let $c$ be the lowest nonzero entry in column $s+1$.  Since $\chi^{-}_{s,t-1}\geq 0$, this implies that $c>t$, and hence $u$ has the form:
\[
u=
\left(
\begin{array}{ccccccc}
% &0& \vdots& \multicolumn{1}{|c}{\vdots}&\vdots& \vdots&\\
%\dots&0&u_{s-2,c-2}&\multicolumn{1}{|c}{0}&0&\dots\\
\dots&0&\multicolumn{1}{|c}{\vdots}&\vdots&\vdots&\\
\dots&0&\multicolumn{1}{|c}{u_{s,t-1}}&u_{s+1,t}&u_{s+2,t+1}&\dots\\ \cline{3-4}
\dots&0&{u_{s,t}}&u_{s+1,t+1}&\multicolumn{1}{|c}{u_{s+2,t+2}}&\dots\\ 
\dots&0&0&u_{s+1,t+2}&\multicolumn{1}{|c}{u_{s+2,t+3}}&\dots\\
\dots&\vdots &\vdots &\vdots &\multicolumn{1}{|c}{\vdots}&\dots\\
\dots&0&0&u_{s+1,c}&\multicolumn{1}{|c}{u_{s+2,c+1}}&\dots\\
\dots&0&0&0&\multicolumn{1}{|c}{u_{s+2,c+2}}&\dots\\
%\dots&u_{s-2,t}&u_{s-1,t+1}&u_{s,t+2}&0&\dots\\
&\vdots& \vdots&\vdots&\multicolumn{1}{|c}{\vdots}&&\\
\end{array}\right).
\]
We set $u':=u-\beta(A(-s)[-t]/t^{c-t})$.  As in the previous case, the claim now follows by induction.
\end{proof}



%\begin{proof}
%We first apply  Lemma~\ref{lem:cones}\dots
%%.  We obtain that $\Sigma_e:=\Sigma(\Phi^{-1}(V_e),\Phi)$ is a full dimensional, equidimensional simplicial fan.  We may thus talk about boundary facets of $\Sigma_e$, and we define $D_e$ to be the intersection of the halfspaces corresponding to all boundary facets of $\Sigma_e$.  We have $D_e\subseteq \Sigma_e$ by \cite[Lemma~A.3]{bbeg}.
%%
%%The existence of pure resolutions is trivial for $A$, and this implies that each shifted pure diagram $\pi_d$ lies in $\BBQ^{1}(A)$, and hence that $D_e$ is a subcone of $\BBQ^{1}(A)\cap V_e$ for all $e$.  Since each point of $\BBQ^{1}(A)$ lies in $V_e$ for some $e$, we may complete the proof by showing that  $\BBQ^{1}(A)\cap V_e \subseteq D_e$ for all $e$.  
%%
%%
%%We note that there are two ways that adjacent elements $d<d'$ cna arise in $\Phi^{-1}(\UU_e)$.  The first is simply that $d'$ is obtained from $d$ by adding $1$ to a single entry.  The second arises when the finite entries of $d$ and $d'$ do not line up.  In this case, $d'_j=d_j$ for all $j\notin \{i-2, i\}$; $d$ satisfies $d_i=i+e$ and $d_{i+1}=\infty$; and $d'$ satisfies $d_{i-2}=(i-2)-e$.  We refer to the second case $d<d'$ as a \defi{shift from column $i$}.
%%%The poset $\Phi^{-1}(\UU_e)$ is graded, and pairs of adjacent elements $d<d'$ arise in only two ways.
%%%\begin{enumerate}[(a)]
%%%	\item  $d'$ is obtained from $d$ by adding $1$ to one of the finite entries of $d$.  Thus, $d'_j=d_j$ for all $j\ne i$ and $d'_i=d_i+1$.
%%%	\item  $d'$ is obtained from $d$ by shifting in homological dimension.  In this case $d'_j=d_j$ for all $j\notin \{i-2, i\}$; $d$ satisfies $d_i=i+e$ and $d_{i+1}=\infty$; and $d'$ satisfies $d_{i-2}=(i-2)-e$.
%%%\end{enumerate}
%%%
%%
%%We may use this fact to identify the halfspaces corresponding to essential boundary facets of $\Sigma_e$.  As in, e.g. \cite[Proposition~2.12]{boij-sod1}, these halfspaces are entirely by the omitted element $d$ and its two adjacent neighbors $d'$ and $d''$, and we refer to such a halfspace by the triplet $d'<d<d''$.
%%\begin{enumerate}[(i)]
%%	\item  A chain where we omit either the maximal element or minimal element from $\Phi^{-1}(V_e)$.
%%	\item A chain where $d',d,$ and $d''$ all differ in a single position $i$.  This can arise in three ways:
%%		\begin{itemize}
%%			\item $d''_i=d_i+1=d'_i+2$.  For example, the chain
%%	\[
%%(\dots,1^*,\dots) <(\dots, 2^*,\dots) <(\dots,3^*,\dots)	\]
%%			\item  $d'<d$ is a shift from column $i+2$ and $d''_i=d_i+1$.  For example, 	\[
%%(\dots, \emptyset, 0, e^*, \infty, \dots)<(\dots, -e-1, 0, \infty^*, \infty, \dots)<(\dots, -e, 0, \infty^*, \infty, \dots)
%%	\]
%%			\item  $d_i=d'_i+1$ and $d<d''$ is then a shift in column $i$.  For example,
%%	\[
%%(\dots, \emptyset, 0, e-1^*, \infty, \dots)<(\dots, \emptyset, 0, e^*, \infty, \dots)<(\dots, -1-e, 0, \infty^*, \infty, \dots)
%%	\]	
%%			\end{itemize}
%%	\item A chain where $d', d,$ and $d''$ differ by $1$ in adjacent positions.  For this to be submaximal, we must have $d''_i=d_i+1=d'_i+1$, $d''_{i+1}=d_{i+1}=d'_{i+1}+1$ and $d'_i+1=d'_{i+1}$.  For example, the chain
%%			\[
%%(\dots, 0,1^*,\dots) <(\dots, 0,2^*,\dots) <(\dots, 1,2^*,\dots) 
%%			\]
%%	\item A chain where $d'<d$ is a shift in column $i$ and $d<d''$ is a shift in column $i-1$.  For example, the chain:
%%		\[
%%		(\dots, e^*,e+1,\dots)<(\dots, -e+1,e^*,\dots)<(\dots, -e+2,-e+1,\infty^*,\dots)
%%		\]	
%%\end{enumerate} 
%%These boundary facets correspond, respectively, to the halfspaces:
%%\begin{enumerate}[(i)]
%%	\item  Omitting the maximal element corresponds to $\epsilon_{-e,0}\geq 0$ and omitting the minimal element corresponds to $\epsilon_{e,0}\geq 0$.  
%%	\item  All three case here correspond to $\epsilon_{i,d_i}\geq 0$
%%	\item  $\chi_{i,d_i}\geq 0$
%%	\item  $\chi_{i-1,i-1+e}\geq 0$
%%%	\item  $\chi_{\tau-1,d_0-2}$.
%%\end{enumerate}
%%As noted above, these functionals are nonnegative on $\BBQ^1(A)$.  Hence, we may apply Lemma~\ref{lem:cones} to obtain the conclusion.
%\end{proof}
%
%\begin{cor}\label{cor:dualconeA}
%The cone $\BBQ^{\bb}(A)$ is defined by the halfspaces \daniel{fill in as appropriate}
%	\begin{enumerate}
%		\item $\pm \chi\geq 0$ (i.e. $\chi=0$.)
%		\item $\epsilon_{i,j}\geq 0$ for all $i,j\in \ZZ$.
%		\item  $\chi_{i,j}\geq 0$ for all $i\in \ZZ$ and $j\in \ZZ$.
%	\end{enumerate}
%\end{cor}






%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Proof of Theorem~\ref{thm:extremal rays refined}}\label{sec:refined}
%\subsection{Resolutions and refined Boij--S\"oderberg theory for $S$}\label{sec:refined}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

The key to proving Theorem~\ref{thm:extremal rays refined} is to combine Theorem~\ref{thm:Phi} with Corollary~\ref{cor:dualconeA refined}
to produce lots of nonnegative functionals on $\BBQ^{\bb}(S)$.  This is accomplished in the following lemma.

%For instance, if $\FF$ is the free resolution of a (non-finite length) module, then $\FF\cdot \cE$ will be supported entirely in homological degrees $-n, \dots, n+1$, but it may fail to have finite length homology in some of these homological degrees.  More generally, if $\FF$ is compatible with $\bb$, then this will force certain conditions on the possible homology $\FF\cdot \cE$, and the following definition captures this phenomenom.

%\begin{lemma}
%Fix $\FF\in \DD^b(S)$ and $\cE\in \DD^b(\PP^n)$.  We have:
%\begin{enumerate}
%	\item If $\FF\otimes \cE$ is exact in homological degrees $\geq 0$, then $\FF\cdot \cE$ has finite length homology in homological degrees $\geq 0$.  
%	\item  If  $\FF\cdot \cE$ is exact in homological degrees $\leq 0$, then $\FF\cdot \cE$ has finite length homology in homological degrees $\leq -\dim(\cE)$.  
%\end{enumerate}
%\end{lemma}
%\begin{proof}
%For the second statement, we see that
%\end{proof}

\begin{lemma}\label{lem:refined positivity}
Let $\bb$ be any nondecreasing (resp. nonincreasing) sequence with $\bb_0=k$.   We define $\bb'$ by the formula:
\[
\bb'_i:=\begin{cases}
1&\text{ if } i\geq 0 \ (\text{resp. } i\leq -k+1)\\
0&\text{ if } i<0  \ (\text{resp. } i> -k+1).
\end{cases}
\]
The  pairing $\Phi$ induces a map of cones:
\[
\BBQ^{\bb}(S)\times \CQ^{n+1-k}\to \BBQ^{\bb'}(A)
\]
given by $(\beta(\FF), \gamma(\cE))\mapsto \beta(\FF\cdot \cE)$.
\end{lemma}
\begin{proof}
We first consider the nondecreasing case.  Let $\FF$ be compatible with $\bb$ and let $\cE$ be a coherent sheaf of codimension $\geq n+1-k$.  By replacing $\cE$ by a general $\GL_{n+1}$ translate, we may assume that $\FF$ and $\cE$ are homologically transverse~\cite{miller-speyer}.  It then follows that $\widetilde{\FF}\otimes \cE$ is exact in homological degrees $\geq 0$. \david{give the argument: a spectral sequence with $E^{2}$ term $Tor(\cE, H_{*} \FF)$ converging
to the homology of $\cE\otimes \FF$, plus a definition of homological transversality a little more flexible than the one given in section 1.} Over the generic point of $[\AA^1/\GG_m]$, the complex $\nu^*(\FF)\otimes p_1^*(\cE)$ is quasi-isomorphic to $\widetilde{\FF}\otimes \cE$.  Hence, when $k\geq 0$, $\FF\cdot \cE$ has no homology supported on the generic point of $[\AA^1/\GG_m]$, i.e. $\FF\cdot \cE$ has finite length homology in these cases.  This implies that $\FF\cdot \cE$ is compatible with $\bb'$.

We next consider the nonincreasing case.  Let $\FF$ be compatible with $\bb$ and let $\cE$ be a coherent sheaf of codimension $\geq n+1-k$ and assume that they are homologically transverse.  It then follows that $\FF\otimes \cE$ is exact in homological degrees $\leq 0$.
As above, the complex $\nu^*(\FF)\otimes p_1^*(\cE)$ is exact in homological degrees $k\leq 0$.  Since the dimension of the support of $\cE$ is at most $k-1$, it follows that $\FF\cdot \cE$, which is the pushforward of $\nu^*(\FF)\otimes p_1^*(\cE)$, has no homology supported on the generic point of $[\AA^1/\GG_m]$ in homological degrees $\leq -k+1$.  Thus, $\FF\cdot \cE$ has finite length homology in these cases, so it is compatible with $\bb'$.
\end{proof}


The following lemma will be used repeatedly in our proof of Theorem~\ref{thm:extremal rays}.
\begin{lemma}\label{lem:pure and supernatural}
Let $d$ be the codimension $n+1$ degree sequence corresponding to a pure complex $\FF_d$, and let $f=(f_1>\dots >f_n)$ be the root sequence corresponding to a supernatural vector bundle $\cE_f$.  Then
$
\beta_{i,j}(\FF_d\cdot \cE_f)\ne 0
$
if and only if $d_\ell=j$ where $f_{\ell-i}>-d_{\ell}>f_{\ell-i+1}$.\end{lemma}
\begin{proof}
Without loss of generality, we may assume $i=j=0$ and we may represent $\FF_d\cdot \cE_f$ by its minimal free resolution. Unless $0$ appears in $d$ and $0$ does not appear in $f$, we clearly have $\beta_{0,0}(\FF_d\cdot \cE_f)=0$.  We take the convention that $f_0=\infty$ and $f_{n+1}=\emptyset$. We may then assume that $d_{\ell}=0$ for a unique $\ell$, and that $f_m>0>f_{m+1}$ for a unique $m$.
Since $\cE_f$ is supernatural, it then follows that $\gamma_{q,0}(\cE_f)\ne 0 \iff q=m$.  Hence, we may apply Theorem~\ref{thm:betti numbers of pairing} to conclude that
\[
\beta_{0,0}(\FF_d\cdot \cE_f)\ne 0 \iff m=\ell,
\]
implying the lemma.
\end{proof}



\begin{proof}[Proof of Theorem~\ref{thm:extremal rays refined}]
We consider the case where $\bb$ is nondecreasing, as the nonincreasing case is essentially the same.  We proceed by restricting to finite dimensional subcones.  For $(\delta,\epsilon)\in \ZZ^2$ with $\epsilon-\delta\geq n+1$, we set $\VV_{(\delta,\epsilon)}$ to be the subspace of $\VV$ defined by $\VV_{(\delta,\epsilon)}:=\bigoplus_{i=\delta}^\epsilon \bigoplus_{j=-\epsilon +i}^{-\delta+i} \QQ$.  We let $P_{(\delta,\epsilon)}$ be the poset of degree sequences that are compatible with $\bb$ and whose corresponding rays lie in $\VV_{(\delta,\epsilon)}$, and we set $\widetilde{\bb}=(b_{-\delta},b_{-\delta+1},\dots, b_{\epsilon})$ be the truncation of $\bb$.  Since we can ignore any column $i$ with $b_i=\emptyset$, we may, without loss of generality, assume that $b_\delta \geq 0$.  We may also assume, without loss of generality that $b_{\epsilon-n-1}<\infty$, else we could replace $\epsilon$ by $\epsilon-1$.  

By possibly shrinking $n$ (which will not affect the rest of the proof), we may assume that the minimal degree sequence in $P_{(\delta,\epsilon)}$ corresponds to a pure complex of finite length.  Thus, $P_{(\delta,\epsilon)}$ is the subposet consisting of all degree sequences between its minimal element $d_{\min}$:
\[\bordermatrix{&&&\delta&&&\epsilon-n-1&&\epsilon &&\cr
              d_{\min}= &\dots&\emptyset,&\emptyset,&\dots&\emptyset,&-n-1,&\dots &0, &\infty,&\dots\cr}\]
and its maximal element
\[\bordermatrix{&&\delta&&\delta+b_\delta&&&\epsilon &&\cr
              d_{max}= &\dots&0,&\dots&n+1,&\infty,&\dots &\infty,&\infty,&\dots\cr}\]
Let $\Sigma_{(\delta,\epsilon)}$ be the cone spanned by the pure diagrams of type $d$, as $d$ ranges over the poset $P_{(\delta,\epsilon)}$.  We may apply the proof of  \cite[2.9]{boij-sod1} to conclude that $\Sigma_{(\delta,\epsilon)}$ has the structure of a simplicial fan, whose simplices correspond to chains in $P_{(\delta,\epsilon)}$.

We next note that any maximal chain in $P_{(\delta,\epsilon)}$ spans the codimension $b_f$ subspace of $\VV_{(\delta,\epsilon)}$ cut out by the vanishing of the first $b_f$ Herzog--K\"uhl equations.  It follows that, inside of its span, $\Sigma_{(\delta,\epsilon)}$ is a full-dimensional, equidimensional simplicial fan.  We define $D_{(\delta,\epsilon)}$ to be the intersection of the halfspaces corresponding of all of the boundary facets of $\Sigma_{(\delta,\epsilon)}$.  We have $D_{(\delta,\epsilon)}\subseteq \Sigma_{(\delta,\epsilon)}$ 

The existence of pure resolutions~\cite[Theorem~0.1]{eis-schrey1} implies that, for any degree sequence from $P_{(\delta,\epsilon)}$, the corresponding ray lies in $\BBQ^{n+1}(S)$.  Hence $D_{(\delta,\epsilon)}$ is a subcone of $\BBQ^{n+1}(S)\cap \VV_{(\delta,\epsilon)}$ for all $(\delta,\epsilon)$.  
As discussed in~\cite[Appendix A]{bbeg}, we may thus talk about boundary facets of $\Sigma_{(\delta,\epsilon)}$, and we define $D_{(\delta,\epsilon)}$ to be the intersection of the halfspaces corresponding to all boundary facets of $\Sigma_{(\delta,\epsilon)}$.  We have $D_{(\delta,\epsilon)} \subseteq \Sigma_{(\delta,\epsilon)}$.
Since any point of $\BBQ^{\bb}(S)$ lies in some subspace of the form $\VV_{(\delta,\epsilon)}$, we may complete the proof by showing that
\[
\BBQ^{n+1}(S)\cap \VV_{(\delta,\epsilon)} \subseteq D_{(\delta,\epsilon)}
\]
for all $(\delta,\epsilon)$.  

Now we come to a significant difference between this proof and similar proofs from \cites{eis-schrey1,boij-sod2}.  There are now three ways that  adjacent elements $d<d'$ can arise in $P_{(\delta,\epsilon)}$.   The first way is simply that $d'$ is obtained from $d$ by adding $1$ to a single entry, as in:
\[
(\dots,3^\circ,\dots)<(\dots,4^\circ,\dots).
\]
The second way is when the finite entries of $d$ and $d'$ lie in different homological positions.  Let $c$ be the codimension of $d$.  For this case to occur, there exists a unique column $i$ such that: $d_j=d'_j$ for $j\notin \{i, i-c-1\}$; $d_i=i+e$ and $d'_i=\infty$; and $d_{i-c-1}=\emptyset$ and $d'_{i-c-1}=i-c-1-e$.  For example, if $c=2$ and $i=0$, we could have:
\[
(\dots, \emptyset, -2, 0, e^\circ, \dots)<(\dots, -2-e,-2, 0, \infty^\circ, \dots).
\]
We refer to this second as a \defi{homological shift from column $i$}.

The third possibility is that $d$ and $d'$ correspond to degree sequences of different codimensions.  For this to occur, we must have $d_{i}=-f+i$ and $d'_i=\infty$ for some $i$.  
For example, if $n=2$ and $i=0$, we could have:
\[
(\dots, \emptyset, -2, 0, -f^\circ, \dots)<(\dots, \emptyset,-2, 0, \infty^\circ, \dots).
\]
We refer this as a \defi{codimension shift}.  (Note that, since $\bb$ is nondecreasing, we only ever face codimension shifts which increase the codimension.  When $\bb$ is nonincreasing, we will only ever face codimension shifts which decrease the codimension.)


We now identify the halfspaces corresponding to boundary facets of $\Sigma_{(\delta,\epsilon)}$.  
As in, e.g. \cite[Proposition~2.12]{boij-sod1}, these halfspaces are (with the exception of case (i) below) entirely determined by the omitted element $d$ and its two adjacent neighbors $d'$ and $d''$, and we refer to such a halfspace by the triplet $d'<d<d''$.  The different types of boundary facets of $\Sigma_e$ that arise are the following:
\begin{enumerate}[(i)]
	\item A chain where we omit either the maximal or minimal element of $P_e$.
	\item A chain where $d'_i<d_i<d''_i$ for some $i$.  This can arise in four different ways depending on whether/where a shift occurs.  First, we could have no shift, in which case we must have $d''_i=d_i+1=d'_i+2$.  For example, the chain
	\[
(\dots,1^*,\dots) <(\dots, 2^*,\dots) <(\dots,3^*,\dots)
	\]
Second, is of this kind: $d'<d$ could be a shift from column $i+2$, followed by $d''_i=d_i+1$.  For example, if $n=1$, we could have
	\[
	(\dots, \emptyset, -2, 0, e^*, \dots)<(\dots, -2-e,-2, 0, \infty^*, \dots)<(\dots, -e,-2, 0, \infty^*, \dots).
	\]
Third, we could have $d_i=d'_i+1$ and $d<d''$ a shift from column $i$. For example, if $n=1$, we could have
	\[
	(\dots, \emptyset, -2, 0, e-1^*, \dots)<(\dots, \emptyset, -2, 0, e^*, \dots)<(\dots, -2-e,-2, 0, \infty^*, \dots)	\]
Fourth, we could have $d'<d$ increases the last finite entry and then $d<d''$ is a codimension shift.  For instance,
\[
(\dots,\emptyset,0^\circ,-f,\infty,\dots)<(\dots,\emptyset,0^\circ,-f+1,\emptyset,\dots)<(\dots,\emptyset,0^\circ,\infty,\infty,\dots).
\]

	\item A chain where $d', d,$ and $d''$ by $1$ in adjacent positions.  For this to be submaximal, we must have $d''_i=d_i+1=d'_i+1$, $d''_{i+1}=d_{i+1}=d'_{i+1}+1$ and $d'_i+1=d'_{i+1}$.  For example, the chain
			\[
(\dots,, 0,1^*,\dots) <(\dots, 0,2^*,\dots) <(\dots, 1,2^*,\dots) 
			\]
	\item A chain where $d'<d$ is a shift from column $i$ and $d<d''$ is a shift from column $i-1$.  For example, the chain:
		\[
		(\dots, 0,e-1^*,e,\infty,\dots)<(\dots, -e+2,0,e-1^*,\infty,\dots)<(\dots, -e+3,-e+2,0,\infty^*,\dots)
		\]
	\item A chain where $d'<d$ is a codimension shift and $d<d''$ is also a codimension shift.  
%Let $c$ be the codimension of of $d'$ and assume that the finite entries of $d'$ lies in homological positions $\{i,\dots,i+c\}$.  Then we have $d'_j=d_j$ for all $j<i+c$; $d'_j=d''_j$ for all $j<i+c-1$; $d_{i+c}=\infty$ and $d''_{i+c-1}=d_{i+c}\emptyset$.  
For instance
\[
(\dots,\emptyset,0^\circ,-f,\infty,\dots)<(\dots,\emptyset,0^\circ,-f+1,\emptyset,\dots)<(\dots,\emptyset,0^\circ,\infty,\infty,\dots).
\]
	\item   A chain where $d'<d$ is a codimension shift and $d<d''$ is a homological shift.  For  instance
	\item   A chain where $d'<d$ is a homological shift and $d<d''$ is a codimension shift
\end{enumerate} 

To complete the proof, we will identify the functional corresponding to each of these boundary facets (the functional is unique in the vector space spanned by $\Sigma_{(\delta,\epsilon)}$), and then we will show that this functional may be realized as $(\beta(\FF)\mapsto \zeta(\FF\cdot \cE_f))$, where $\cE_f$ is a supernatural sheaf of codimension $\ell$ (for some $\ell$) and where $\zeta$ is one of the functionals that arises from Corollary~\ref{cor:dualconeA refined}.   We will then show use Lemma~\ref{lem:refined positivity} to show that  this is nonnegative on any $\beta(\FF)\in \BBQ^{\bb}(S)$.


The corresponding functionals are obtained as follows.  For (ii), we consider the functional:
\[
\beta(\FF)\mapsto \beta_{i,{d_i}}(\FF\cdot \cO(d_i)).
\]
If $e$ is a degree sequence and $\FF_e$ is a pure complex of type $e$, then by Lemma~\ref{lem:pure and supernatural}, this functional is nonzero on $\beta(\FF_e)$ if and only if $e_i=d_i$.
%on $\pi_e$ if and only if $[\pi_e, \cO(d_i)]$ has a nonzero entry in position $\beta_{i,d_{i}}$.  Since $\gamma_{q,d_i}(\cO(d_i))\ne 0$ only if $q=0$, we may use Theorem~\ref{thm:betti numbers of pairing} to see that the $\beta_{i,d_i}$ entry of $[\pi_e, \cO(d_i)]$ simply equals that $\beta_{i,d_i}$ entry of $\pi_e$.  Thus, the functional is positive on $\pi_d$.  Moreover, if $e\leq d'$ then $e_i\leq d'_i<d_i$ and if $e\geq d''$ then $e_i\geq d''_i>d_i$.  
Now let $e$ be a degree sequence from any chain of type (ii).  Then $e_i=d_i$ if and only if $e=d$, and it thus follows that this functional corresponds to any boundary facet of type (ii).

For (i), we consider the case where we omit the maximal element, the other case being similar.  Note that $(d_{\max})_{\delta}=0$ and $e_{\delta}<0$ for all other degree sequences $e$ in $P_{(\delta,\epsilon)}$.  Then, by essentially the same argument as in the previous paragraph, the functional 
\[
\beta(\FF)\mapsto \beta_{\delta,0}(\FF\cdot \cO)
\]
corresponds to this boundary facet.

For (iii), we let $c=\codim(d)$.  Without loss of generality we can assume that $d_j\in \ZZ$ if and only if $j\in \{0, \dots, c\}$.   We may also assume that $d_i=0$ and thus that $d_{i+1}=2$.  We then fix the root sequence $f=(-d_0>-d_1>\dots >-d_{i-1}>-d_{i+2}>\dots >-d_{c})$, and we let $\cE_f$ be any supernatural vector bundle of type $f$.  We claim that the corresponding functional is given by
\[
\beta(\FF) \mapsto \chi_{0,0}(\FF\cdot \cE_f).
\]
We first observe that this functional is strictly positive on $\FF_d$.  Since $-d_j$ is a root of $\cE_f$ for all $j\ne i,i+1$, we see that $\FF_d\cdot \cE_f$ is a two-term complex of the form
\[
\FF_d\cdot \cE_f=\left[ \overset{\circ}{A^N} \gets A^N(-2)\right],
\]
for some $N>0$.  It follows from the definition of $\chi_{0,0}$ that $\chi_{0,0}(\FF_d\cdot \cE_f)=N>0$.  

Next, we recall that the functional $\chi_{0,0}$ splits a Betti table on $A$ into two regions:
\[
\chi_{0,0}\Rightarrow 
\left(
\begin{array}{cccccccc}
 & \vdots& &\multicolumn{1}{|c}{\vdots}&& \vdots&&\\
\dots&0&0&\multicolumn{1}{|c}{1}&-1&1&-1&\dots\\
\dots&0&0&\multicolumn{1}{|c}{1}&-1&1&-1&\dots\\
\dots&0&0&\multicolumn{1}{|c}{1^\circ}&-1&1&-1&\dots\\ \cline{4-5}
\dots&0&0&0&0&\multicolumn{1}{|c}{1}&-1&\dots\\
\dots&0&0&0&0&\multicolumn{1}{|c}{1}&-1&\dots\\
& \vdots&&\vdots&& \multicolumn{1}{|c}{\vdots}&&\\
\end{array}
\right),
\]
where the $1^\circ$ corresponds to $\beta_{0,0}$.   If $\beta(\FF\cdot \cE_f)$ lies entirely in the upper region, then $\chi_{0,0}(\FF\cdot \cE_f)=\chi(\FF\cdot \cE_f)$ which equals zero whenever $\FF\cdot \cE_f$ has finite length homology.  On the other hand, if $\beta(\FF\cdot \cE_f)$ lies entirely in the lower region, then $\chi_{0,0}(\FF\cdot \cE_f)$ equals the dot product of $\beta(\FF\cdot \cE_f)$ with the zero matrix.

Thus, to complete our computation for case (iii), it suffices to verify the following claim: if $e\leq d'$ then $\beta(\FF_c\cdot \cE_f)$ lies entirely in the upper region and $\FF_e\cdot \cE_f$ has finite length homology, and if $e\geq d''$ then $\beta(\FF_e\cdot \cE_f)$ lies entirely in the lower region.  This claim may be verified by repeated applications of Lemma~\ref{lem:pure and supernatural}.  We discuss one case of this verification, with the others being similar.  For instance, fix $e\leq d'$ and assume that $\beta_{0,e_\ell}^A(\FF_e\cdot \cE_f)\ne 0$.  We must show that $e_{\ell}\leq 0$.  By Lemma~\ref{lem:pure and supernatural}, we have
$
f_{\ell}>-e_{\ell}>f_{\ell+1}.
$
However, $e_{\ell}\leq d_{\ell}$ and thus $f_{\ell}\geq -d_{\ell}$.  By construction of $f$, this holds if and only if $\ell \leq i$.  Since $e$ is a degree sequence, we then have $e_{\ell}\leq e_i\leq d_i=0$, as desired.  Further, since $e\leq d'$ and since $\bb$ is nondecreasing, it follows that $\codim(e)\geq \codim(d')$ and thus that $\codim(\FF_e)+\codim(\cE_f)\geq n+1$.  After translating by $\GL_{n+1}$, which will not affect the Betti table of $\FF_e$, we may thus assume that $\FF_e$ and $\cE_f$ are homologically transverse.  It then follows that $\FF_e\cdot \cE_f$ has finite length homology, completing the claim when $e\leq d'$.  The argument fo $e\geq d''$ similarly follows by repeated applications of Lemma~\ref{lem:pure and supernatural}.

We next consider case (iv).  We set $c=\codim(d)$, and without loss of generality, we may assume that $i=1$.  We then note that $d_j$ is finite if and only if $j\in \{-c,\dots ,0\}$.  We fix the root sequence $f=(-d_{-c+1}>-d_{-c+2}>\dots>-d_{-1})$ and we let $\cE_f$ be any supernatural bundle of type $f$.   The corresponding functional is:
\daniel{not sure I adjusted indices right here.  recheck!}
\[
\beta(\FF)\mapsto \chi_{-c-1,-c-2+\delta}(\FF\cdot \cE_f).
\]
Now, let $e$ be any degree sequence in $P_{(\delta,\epsilon)}$.  One may verify that the above functional computes the partial Euler characteristic of $\FF_e\cdot \cE_f$ computed from homological degree $-c+1$ to column $\infty$.  Now, if $\FF_d$ is a pure complex of type $d$, then there exists some $N$ such that:
\[
\FF_d\cdot \cE_f=\left[ \overset{\zp}{A^N}(c-\delta)\gets A^N(-\delta) \right][-c],
\]
and hence the functional evaluates to $N$.  If $e\leq d'$, then, after achieving homological transversality, $\FF_e\cdot \cE_f$ has finite length homology and is supported entirely in homologiccal degrees $\geq -c+1$, and so the functional evaluates to $0$.  If $e\geq d''$, then $\FF_e\cdot \cE_f$ is supported entirely in homological degrees $<-c+1$, and so the functional also evaluates to $0$.

For case (v), we let $c$ be the codimension of $d$.  By reindexing the columns, it suffices to consider the consider where the finite entries of $d$ lie in homological positions $\{0,\dots,c\}$.  We then let $f$ be the root sequence $f=(-d_0>\dots >-d_{c-2})$ and we let $\cE_f$ be a supernatural sheaf of type $f$.  The appropriate functional has the form:
\[
\beta(\FF)\mapsto \chi_{-1,d_{c-2}}(\FF\cdot \cE_f).
\]
We continue with the notation where, for a degree sequence $g$, $\FF_g$ represents a pure complex corresponding to $g$.  We compute that $\FF_d\cdot \cE_f$ has the form:
\[
\FF_d\cdot \cE_f=\left[\overset{\zp}{A^N}(-d_{c-1})\gets A^N(-d_{c-2}) \right].
\]
Applying $\chi_{-1,d_{c-2}}$ to this complex yields $N$, and hence our functional is nonnegative on $d$.  As in the proof of cases (iii) and (iv) from Theorem~\ref{thm:extremal rays}, the cases $g\geq d''$ and $g\leq d'$ split in half.  When $g\geq d''$ then $\FF_g\cdot \cE_f$ is supported entirely in the ``upper region'' corresponding to $\chi_{-1,d_{c-2}}$.  Since $\codim(\cE_F)=c-1$ and since $\FF_g$ has codimension $c$, it follows $\FF_g\cdot \cE_f$ has finite length homology, and hence
\[
\chi_{-1,d_{c-2}}(\FF_g\cdot \cE_f)=\chi(\FF_g\cdot \cE_f)=0.
\]
When $g\leq d'$, then $\FF_g\cdot \cE_f$ is supported entirely in the ``lower region'' corresponding to $\chi_{-1,d_{c-2}}$, and so the functionally trivally vanishes on this complex.  This deals with case (v).


Finally, the above argument for case (v) applies, literally verbatim, to cases (vi) and (vii) as well. 

We have thus verified that
\[
\BBQ^{\bb}(S)\cap V_{(\delta,\epsilon)}=\Sigma_{(\delta,\epsilon)},t
\]
and this implies the theorem when $\bb$ is nondecreasing.  

For the nonincreasing case, the key point is to replace each instance of a $\chi_{i,j}$ functional by the $\chi^{-}_{i,j}$ functional.  We also must reverse the ``upper region/lower region'' arguments.  Otherwise, the nonincreasing case is substantively equivalent to the nondecreasing case.
\end{proof}










%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Examples}\label{sec:examples}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
In this section we illustrate the results from the previous sections via a few examples.
\begin{example}\label{ex:1441}
Let $S=\kk[x,y,z]$ and let
\begin{equation}\label{eqn:intro ex}
\beta(\FF)=\begin{pmatrix} 1&-&-&-\\ -&-&-&-\\-&4&4&-\\-&4&4&-\\-&-&-&-\\-&-&-&1 \end{pmatrix}.
\end{equation}


We first apply Theorem~\ref{thm:Phi} to show that $\beta(\FF)$ cannot equal the Betti table of a positive complex with finite length homology.  To prove this, we choose $\cE$ to be a rank $2$ supernatural bundle of type $(0,-8)$.  Then $\FF\cdot \cE$ can be represented by a positive, free complex of the form
\[
\FF\cdot \cE=\left[ \begin{matrix}A(-3)^{60}\\ \oplus \\A(-4)^{64}\end{matrix} \longleftarrow \begin{matrix}A(-4)^{64}\\\oplus \\ A(-5)^{60}\end{matrix}\right].
\]
For any positive complex of this form, the kernel of the map will contain at least $64-60=4$ copies of $A(-4)$, and hence $\FF\cdot \cE$ cannot have finite length homology.  By Theorem~\ref{thm:Phi}\eqref{thm:Phi:2}, we conclude that $\beta(\FF)$ cannot be the Betti table of a complex with finite length homology.

However, $\beta(S)$ does lie in $\BBQ^2(S)$, as illustrated by the decomposition:
\[
\begin{pmatrix} 1^\zp&-&-&-\\ -&-&-&-\\-&4&4&-\\-&4&4&-\\-&-&-&-\\-&-&-&1 \end{pmatrix}
=
\begin{pmatrix} -^\zp&-&-&-\\ -&-&-&-\\-&\frac{16}{5}&4&-\\-&-&-&-\\-&-&-&-\\-&-&-&\frac{4}{5} \end{pmatrix}
+
\begin{pmatrix} -^\zp&-&-&-\\ -&-&-&-\\-&\frac{3}{10}&-&-\\-&-&\frac{1}{2}&-\\-&-&-&-\\-&-&-&\frac{1}{5} \end{pmatrix}
+
\begin{pmatrix} \frac{1}{5}^\zp&-&-&-\\ -&-&-&-\\-&\frac{1}{2}&-&-\\-&-&\frac{3}{10}&-\\-&-&-&-\\-&-&-&- \end{pmatrix}
+
\begin{pmatrix} \frac{4}{5}^\zp&-&-&-\\ -&-&-&-\\-&-&-&-\\-&4&\frac{16}{5}&-\\-&-&-&-\\-&-&-&- \end{pmatrix}.
\]
\end{example}





\begin{example}
Corollary~\ref{cor:uniform} recovers the fact, first observed by Mats Boij, that a pure diagram of type $d=(d_0, \dots, d_{n+1})$ can be written the sum of a pure diagram of type $(d_0, \dots, d_n)$ and a shifted pure diagram of type $(d_1, \dots, d_{n+1})[-1]$.  For instance
\[
\begin{pmatrix}
1&-&-&-\\
-&5&5&-\\
-&-&-&1
\end{pmatrix}
=
\begin{pmatrix}
1&-&-&-\\
-&3&2&-\\
-&-&-&-
\end{pmatrix}
+
\begin{pmatrix}
-&-&-&-\\
-&2&3&-\\
-&-&-&1
\end{pmatrix}.
\]
We may interpret this decomposition as follows.  Let $M$ be an $S=\kk[x,y,z]$-module whose resolution equals the diagram on the left. If $\ell$ is a generic linear form, then as $S/\ell$-modules, the Betti tables of $\Tor^0_S(M,S/\ell)$ and $\Tor^1(M,S/\ell)$ correspond (up to shifts) to the other Betti tables above.
\end{example}

\begin{example}
For any complex $\FF\in \DD^b(S)$, there exist many different values of $\bb$ that are compatible with $\FF$, and the decomposition of $\beta(\FF)$ induced by Theorem~\ref{thm:extremal rays refined} may depend on the choice of $\bb$.   For instance, let $S=\kk[x,y,z]$, $I=(x^2,xy,y^2,xz)$, and let $\FF$ be the minimal free resolution of $S/I$.  Since $\FF$ is a resolution, we may choose $\bb=(\dots, \emptyset, 2^\zp, \infty, \dots)$ and then we decompose
\[
\beta(\FF)=\begin{pmatrix}
1^\zp&-&-&-\\
-&4&4&1
\end{pmatrix}
=
\frac{1}{3}
\begin{pmatrix}
1^\zp&-&-&-\\
-&6&8&3
\end{pmatrix}
+\frac{2}{3}
\begin{pmatrix}
1^\zp&-&-\\
-&3&2
\end{pmatrix}.
\]
$\FF$ is also compatible with $\bb'=(\dots, 2, 2^\zp, 2, \dots)$.  In this case, we obtain the decomposition:
\[
\beta(\FF)=
\begin{pmatrix}
1^\zp&-&-&-\\
-&4&4&1
\end{pmatrix}
=\begin{pmatrix}1^\zp&-&-\\-&3&2\end{pmatrix}
+
3\begin{pmatrix}
-^\zp&-&-&-\\
-&1&2&1
\end{pmatrix}
\] 
This second decomposition is stable under taking a hyperplane section.  Namely, set $S':=S/(\ell)$, where $\ell$ is a generic linear form, and let $\FF'$ be the restriction of $\FF$ to $S'$.  Since $\text{depth}(S/I)=1$, the complex $\FF'$ is not a resolution, but it is still compatible with $\bb'$, and hence the second decomposition still holds for $\FF'$.
\end{example}




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Duality of cones}\label{sec:duality}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
In this section we focus on the cones of the form $\BBQ^\ell(S)$.  Observe that Theorem~\ref{thm:betti numbers of pairing} shows that the pairing $\Phi$ induces a bilinear map of vector spaces:
\begin{align*}
\VV\times \WW & \to \UU\\
(\beta(\FF),\gamma(\cE))&\mapsto \beta(\FF\cdot \cE).
\end{align*}
This yields a map between three cones of interest, as illustrated in Figure~\ref{fig:bracket}.  In particular, for any $\ell=1, \dots, n+1$, the bilinear pairing above restricts to a map of cones:
\[
\BBQ^{\ell}(S)\times \CQ^{n+1-\ell}(\PP^n)\to \BBQ^1(A).
\]

This clarifies the duality properties of our cones, although the fact that $\WW$ is an infinite direct product complicates the picture a bit.  See Remark~\ref{rmk:issues}  below for some discussion of these subtleties.  Fortunately, as shown in \cite{eis-schrey1} (and in the above proof of Theorem~\ref{thm:extremal rays refined}), it turns out that the study of $\BBQ^{n+1}(S)$ only requires functionals coming from the cohomology tables of vector bundles, and a similar statement holds for $\BBQ^{\ell}(S)$ when $\ell<n+1$.  Thus, for any $\ell$, we fix a linear subspace $\PP^{\ell-1}\subseteq \PP^n$ and we define $\CvbQ(\PP^{\ell-1})$ as the subcone of $\WW$ generated by cohomology tables of vector bundles on $\PP^{\ell-1}$.

We may then apply the proof of Theorem~\ref{thm:extremal rays refined} to make a precise duality statement relating $\BBQ^{\ell}$ and $\CvbQ(\PP^{\ell-1})$.  Namely:
\begin{itemize}
	\item a point $v\in \VV$ lies in $\BBQ^{\ell}$ if and only if $v$ pairs with every element of $\CvbQ(\PP^{\ell-1})$ to give an element of $\BBQ^1(A)$;
	\item a point $w$ in the vector space span of $\CvbQ(\PP^{\ell-1})$ lies in $\CvbQ(\PP^{\ell-1})$ if and only if $w$ pairs with every element of $\BBQ^{\ell}$ to give an element of $\BBQ^1(A)$.
\end{itemize}


\begin{remark}\label{rmk:issues}
We remark on a couple of complications related to the above discussion of duality.  To begin with, there exist points in the closure of $\CQ^0(\PP^n)$ which are not the scalar multiple of the cohomology table of a coherent sheaf.   

For instance, let $n=1$ an consider the point $w:=\sum_{i=0}^\infty \frac{1}{2^i} \gamma(\cO_{\PP^n}(-i))$.  
This infinite sum converges, and thus $w\in \WW$.  But a direct computation shows that
\[
\gamma_{1,j}=\frac{2}{2^{j+1}},
\]
and hence no scalar multiple of $w$ can equal the cohomology table of a sheaf on $\PP^n$, since there is no scalar multiple of $w$ such that all of the entries of $w$ are integers.  Of course, the functional:
\[
\beta(\FF)\mapsto \sum_{i=0}^\infty \tfrac{1}{2^i} \beta(\FF\cdot \cO_{\PP^n}(-i))
\]
still induces a map $\BBQ^{n+1}(S)\to \BBQ^1(A)$.

Second, we note that nonnegative functionals can arise from shifted cohomology tables.  For instance, the cohomology table with $w'$ with 
\[
\gamma_{i,j}(w')=\begin{cases}
1&i=1\\
0&i\ne 1,
\end{cases}
\]
also induces a linear map $\BBQ^{n+1}(S)\to \BBQ^1(A)$.
\end{remark}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Categorified Eisenbud--Schreyer Functionals}\label{sec:functionals}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
The following lemma, which is implicit in the  proof of Theorem~\ref{thm:extremal rays refined}, describes the relationship between the Eisenbud-Schreyer functionals from \cites{eis-schrey1, eis-schrey-icm} and those functionals derived from $\Phi$.
\begin{lemma}\label{lem:tau kappa}
Let $\cE_{f}$ be a supernatural sheaf of type $f=(f_1>\dots>f_s)$ on $\PP^n$.  Fix $1\leq \tau \leq s$ and let $\kappa=f_{\tau+1}-3$.  Let $\langle -, \cE_{f}\rangle_{\tau,\kappa}$ be the functional defined in \cite{eis-schrey-icm}, but extended in the natural way to a functional $\VV\to \QQ$ on the entire vector space $\VV$.  
We then have an equality of functions
\[
\bigg( \beta(\FF)\mapsto \chi_{0,\kappa}(\FF\cdot \cE_f)\bigg) =\bigg( \beta(\FF)\mapsto \langle \FF, \cE_f\rangle_{\tau,\kappa} \bigg)\]
from $\VV \to \QQ$.
\end{lemma}

Note that the nonnegativity of all such functionals follows instantly by applying Theorem~\ref{thm:Phi}\eqref{thm:Phi:2} and Proposition~\ref{cor:dualconeA}.  A similar statement holds for each nonnegative functional on cohomology tables.  Thus, the functor $\Phi$ provides a unifying view on all of the Eisenbud--Schreyer functionals and on the corresponding positivity results, including~\cite[Positivity 1]{eis-schrey-icm} and~ \cite[Positivity 2]{eis-schrey-icm}.




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Functoriality}\label{sec:functor}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Let $f: X\to \PP^n$, with $\dim(X)=d$ and $L=f^*\cO(1)$.  We may define cohomology tables and Betti tables for the pair $(X,L)$ as follows.  If $\cE\in \DD^b(X)$then $\gamma(\cE)\in \WW$ is the table with entries $\gamma_{i,j}(\cE)=h^i(X,\cE\otimes L^{\otimes j})$.  For any $0\leq \ell \leq d$, we set $\CQ^{\ell}(X,L)$ to be the subcone of cohomology tables of sheaves whose support has codimension at least $\ell$.

For Betti tables, we let $R=R(X,L)=\oplus_{e\in \mathbb N} H^0(X,L^{\otimes e})$ be the section ring of $L$.  The ring $R$ is naturally $\NN$-graded, and we define $\DD^b(R)$ as the bounded derived category of finitely generated, graded $R$-modules.  If $\FF \in \DD^b(R)$ then we use the notation $\widetilde{\FF}$ to denote the corresponding complex of coherent sheaves on $R$.\daniel{In this level of generality, is $\widetilde{\FF}$ actually a complex on $f(X)$ on note $X$ itself?}

We seek to define a functor:
\[
\Phi_X: \DD^b(R)\times \DD^b(X)\to \DD^b(A).
\]
We let $\sigma: R\to R\otimes A=R[t]$ be the map of rings defined by $\sigma(r)=rt^{\deg(r)}$.  
We write $-\otimes_\sigma SR[t]$ to denote tensoring over $R$ with $R[t]$ using the structure
given by $\sigma$. 

If $F$ is a graded  $R$-module, then 
\[
R\otimes_{\sigma} S[t]
\]
is a bigraded $S[t]$ module.
Thus we may define a functor $\tau$ on derived
categories that takes a graded complex of free $R$-modules $\FF$ to
\[
\tau(\FF): =\widetilde \FF \otimes_{\sigma}\cO_{X\times \AA^{1}},
\]
a complex of graded sheaves on $X\times \AA^{1}$, with the grading coming from degree in $t$, the coordinate on $\AA^{1}$.
We let $p_2: X\times \AA^1\to \AA^1$ be the projection map, and we may define our functor $\Phi_X$, largely parallel to the definition of $\Phi$.
\begin{defn}
Given $\FF\in \DD^b(R)$ and $\cE\in \DD^b(X)$ we define
\[
\Phi_X(\FF,\cE):=Rp_{2*}\left( \tau(\FF)\otimes _{X\times \AA^1}\left( \cE\boxtimes \cO_{\AA^1}\right)\right).
\]
\end{defn}
As above, we often omit $\Phi_X$ from the notation and simply write $\FF\cdot \cE$ for $\Phi_X(\FF,\cE)$.  We immediately obtain an analogue of Theorem~\ref{thm:Phi} for the functor $\Phi_X$.
\begin{theorem}\label{thm:PhiX}
The functor $\Phi_X$ has the following  properties:
\begin{enumerate}
	\item\label{thm:PhiX:1}  The Betti table of $\Phi_X(\FF,\cE)$ depends only on the Betti table of $\FF$ and the cohomology table of $\cE$.
	\item\label{thm:PhiX:2}  If $\widetilde{\FF}\otimes \cE$ is exact, then $\Phi_X(\FF,\cE)$ has finite length homology.  
	%This occurs whenever $\FF$ is a complex with finite length homology and $\cE$ is a vector bundle.  More generally, if  $\codim(\FF)+\codim(\cE)\geq n+1$ then we may, after possibly replacing $\FF$ or $\cE$ by a general $\GL_{n+1}$-translate, assume that $\widetilde{\FF}\otimes \cE$ is exact.
\end{enumerate}
\end{theorem}
\begin{proof}
Statement \eqref{thm:PhiX:1} follows by applying exactly the same proof as used for Theorem~\ref{thm:betti numbers of pairing} above.  Statement \eqref{thm:PhiX:2} follows by applying the proof of Proposition~\ref{prop:exact}
\end{proof}


We first note that, in wide generality, we obtain well defined functors on the cones we have been considering.  Once again, the fact that we are working with derived categories instead of resolutions/sheaves plays an essential role in these definitions.

\daniel{Here I'm just sketching an outline of where I'd like to go:}
We have a well defined map:
\[
f^*\colon: \BBQ^{\bb}(S)\to \BBQ^{\bb}(R) \text{ where } \beta(\FF) \mapsto \beta(f^*\FF).
\]
(We write this as $f^*$ since we may represent any $\FF\in \DD^b(S)$ by its minimal resolution, and in this case there is no need to work with $Lf^*$).
We also have a well defined map \dots



%We may now prove our generalized positivity result.
%\begin{proof}[Proof of Theorem~\ref{thm:pos general X}]
%Over the generic point of $[\AA^1/\GG_m]$, the complex $\FF\cdot \cE$ is quasi-isomorphic to the push-forward of $\widetilde{\FF}\otimes \cE$ to the point $\Spec(\kk)$.  Since $\FF$ is a free complex of $R$-modules with finite length homology, $\widetilde{\FF}\otimes \cE$ is exact.  Hence, over the generic point of $[\AA^1/\GG_m]$, the complex $\FF\cdot \cE$ is exact, thus proving the lemma.
%\end{proof}

We next restrict to the case where $f$ is a finite map. If $\FF$ is a positive, free complex of $S$-modules such whose cohomology modules have codimension at least $d+1$, then by homological transversality, we can assume that $f^*(\FF)$ is a complex with finite length homology.  In particular, we have an injection $f^*\colon \BBQ^{d+1}(S)\to \BBQ^{d+1}(R)$.

If $\cE$ is a coherent sheaf on $X$, then since $f$ is finite, we have
\[
H^i(X,\cE\otimes L^j)=H^i(\PP^n, f_*(\cE)\otimes \cO(j)),
\]
and this yields the injection $f_*\colon \CQ^0(X,L)\to \CQ^{n-d}(\PP^n,\cO(1))$.
We recall that $\cU$ is an Ulrich sheaf for $(X,L)$ if $f_*(\cU)\cong \cO_{\PP^d}^r$ for some $r>0$.  See~\cite{XXXX} for more on Ulrich sheaves.

\begin{lemma}\label{lem:general pairing}
If $f$ is finite then
\[
\beta^R(f^*\FF\cdot \cE)=\beta^S(\FF\cdot f_*\cE).
\]
\end{lemma}
\begin{proof}
Since $\FF$ is a positive, free complex, the Betti table of of $f^*\FF$ is the same as the Betti table of $\FF$.  Since $f$ is a finite map, the cohomology table of $\cE$ on $(X,L)$ is the same as the cohomology table of $f_*\cE$ on $(\PP^n, \cO(1))$.  The lemma then follows immediately from the formulas in Theorem~\ref{thm:betti numbers of pairing} and Lemma~\ref{lem:betti nums genl}.
\end{proof}

\begin{proof}[Proof of Corollary~\ref{cor:isom cones}]
Since $f$ is finite, we obtain the inclusion $\CQ^0(X,L)\subseteq \CQ^0(\PP^n,\cO(1))$.  Now, let $\cE$ be a coherent sheaf on $\PP^n$, and we seek to show that $\gamma(\cE)$ lies in $\CQ^0(X,L)$.  Let $\cU$ be an Ulrich sheaf for $(X,L)$.  The central computation in \cite[Proof of Theorem 5]{eis-schrey-abel} shows that the cohomology table of $\cU\otimes f^*\cE$ is a scalar multiple of the cohomology table of $\cE$. This proves that $\CQ^0(X,L)= \CQ^0(\PP^n,\cO(1))$ as desired.

As noted above, we also have an inclusion $\BBQ^{d+1}(S)\subseteq \BBQ^{d+1}(R)$.  We next observe have a positivity result in this context as well.  Namely, we claim that the pairing induces a map of cones:
\[
\BBQ^{d+1}(R)\times \CQ(X,L)\to \BBQ^1(A).
\]
Over the generic point of $[\AA^1/\GG_m]$, the complex $\FF\cdot \cE$ is quasi-isomorphic to the push-forward of $\widetilde{\FF}\otimes \cE$ to the point $\Spec(\kk)$.  Since $\FF$ is a free complex of $R$-modules with finite length homology, $\widetilde{\FF}\otimes \cE$ is exact.  Hence, over the generic point of $[\AA^1/\GG_m]$, the complex $\FF\cdot \cE$ is exact, and we thus conclude that $\beta(\FF\cdot \cE)\in \BBQ^1(A)$.

Now, imagine that  there exists a complex $\FF$ such that $\beta(\FF)\in \BBQ^{d+1}(R)$ but not in $\BBQ^{d+1}(S)$.  Then, by Theorem~\ref{thm:dual}, there must exist a vector bundle $\cE$ on $\PP^n$ such that $[\beta(\FF),\gamma(\cE)]$ does not lie in $\BBQ^1(A)$.  However, since $\gamma(\cE)$ lies in $\CQ^0(X,L)$, this contradicts the above map of cones.
\end{proof}


We conclude with a few examples.

%\subsection{Zero dimensional schemes}
\begin{example}[Zero dimensional schemes]\label{ex:zero dim}Let $\Gamma=\Spec(B)$ be a $0$-dimensional scheme over $\Spec(\kk)$, where $B$ is an Artinian $\kk$-algebra.  Let $f\colon \Gamma\to \Spec(\kk)$ be the structure map and let $R:=B[t]$.  The cone $\BBQ^1(R)$ of positive, free $R$-complexes with finite length homology is the same as the cone $\BBQ^1(A)$ of positive free $A$-complexes with finite length homology.  
\end{example}

It is interesting to compare Example~\ref{ex:zero dim} with the main results of \cite{bbeg}.  Example~\ref{ex:zero dim} describes bounded complexes with finite length homology; \cite{bbeg} restricts attention to resolutions, but they do not impose a boundedness condition on their complexes.

\begin{example}[Elliptic curve]
Let $E$ be a smooth genus $1$ curve with a point $P\in E$, and let $L=\cO(2P)$ be a degree $2$ line bundle on $E$.  Let $f\colon E\to \PP^1$ be the $2$ to $1$ map induced by $|L|$, and let $R=R(E,L)$ be the section ring.  The ring $R$ is a complete intersection quotient of the nonstandard graded polynomial ring $\kk[x_0,x_1,z,w]$ where $\deg(x_i)=1, \deg(z)=2$ and $\deg(w)=3$.  

If $\FF$ is a positive, free complex of $R$-modules with finite length homology, then the associated complex $\widetilde{\FF}$ of split vector bundles is exact.  Corollary~\ref{cor:isom cones} describes all such complexes $\FF$, up to scalar multiple.
For instance, since $R$ is $2$-dimensional, Example~\ref{ex:1441} implies that (up to scalar multiple), there is a positive, exact complex
\[
\cO_E\longleftarrow \begin{matrix}  \cO_E(-6P)^4\\ \oplus\\ \cO_E(-8P)^4\end{matrix}\longleftarrow \begin{matrix}  \cO_E(-8P)^4\\ \oplus\\ \cO_E(-10P)^4\end{matrix} \longleftarrow \cO_E(-16P)\longleftarrow 0.
\]
\end{example}



\begin{example}[Double cover of $\PP^2$]
For any degree $m>1$, fix a generic polynomial $q\in H^0(\PP^2, \cO(m))$.  Let $f\colon X\to\PP^2$ be the double cover of $\PP^2$ that is ramified over the vanishing of $q$, and let $D$ be the pullback of a hyperplane from $\PP^2$.  Combining Corollary~\ref{cor:isom cones} with Example~\ref{ex:1441} implies that there does not exist an exact sequence of the form:
\[
\cO_X\longleftarrow \begin{matrix}  \cO_X(-3D)^4\\ \oplus\\ \cO_X(-4D)^4\end{matrix}\longleftarrow \begin{matrix}  \cO_X(-4D)^4\\ \oplus\\ \cO_X(-5D)^4\end{matrix} \longleftarrow \cO_X(-8D)\longleftarrow 0.
\]
\end{example}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{Further directions}\label{sec:further}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%




%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Toric/Multigraded generalizations}\label{subsec:toric}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
We continue the notation from the introduction, where $X$ is a projective toric variety with $\dim(X)=n$ and $\rank \Pic(X)=m$, and where $R=\kk[x_0,\dots,x_{n+m-1}]$ is the Cox ring of $X$, presented as a $\mathbb N^m$-graded ring.  We have $I$ is the irrelevant ideal of $R$ and $C= \kk[t_1, \dots, t_m]$ with irrelevant ideal $(t_1\cdots t_m)$.

We note that $\deg(x_i)\in \mathbb N^m$ for all $i$.  For any $\alpha=(\alpha_1,\dots,\alpha_m) \in \mathbb N^m$, we use the multi-index notation $t^{\alpha}:=t_1^{\alpha_1}\cdots t_m^{\alpha_m}$.  We define
\[
\sigma: R\to R\otimes C = R[t_1,\dots,t_m]
\]
as the ring homomorphism given by $\sigma(x_{i})=x_{i}t^{\deg(x_i)}$. 
We write $-\otimes_\sigma R[t_1,\dots,t_m]$ to denote tensoring over $R$ with $R[t_1,\dots,t_m]$
 using the structure given by $\sigma$.

If $F$ is an $\mathbb N^{m}$-graded  $R$-module, then 
\[
F\otimes_{\sigma} R[t_1,\dots,t_m]
\]
is a $\mathbb N^{m}\times \mathbb N^{m}$-graded $R[t_1,\dots,t_m]$-module.
Thus we may define a functor $\tau$ on derived
categories that takes a graded complex of free $R$-modules $\FF$ to
$$
\tau(\FF): =\widetilde \FF \otimes_{\sigma}\cO_{X\times \AA^{m}},
$$
a complex of graded sheaves on $X\times \AA^{m}$, with the grading coming from degrees in the coordinates on $\AA^{m}$. 
%For example, if 
%$$
%\FF: 0\rTo S(-d)\rTo^{f}S\rTo 0
%$$
%where $f$ is a form of degree $d$, then
%$$
%\tau(\FF): 0\rTo \cO_{\PP^{n}}(-d)\boxtimes A(-d)\rTo^{t^{d}f}\cO_{\PP^{n}}\boxtimes A \rTo 0
%$$
%where $P\boxtimes Q$ denotes the tensor product of the pullbacks of $P$ and $Q$ from
%$\PP^{n}$ and $\AA^{1}$, respectively. 
%This description of $\tau$ could 
%be extended to graded complexes of arbitrary finitely generated graded modules
%at the expense of replacing the tensor product with a derived tensor product, but we
%will never need this.

%\begin{defn} The functor $\Phi: D^{b}(\P^{n}) \times D^{b}(S) \to D^{b}(A)$ is given by:
%$$
%\Phi(\cE,\FF) = R\pi_{*} \left(\tau_{0}(\cE)\otimes_{\P^{n}\times\AA^{1}} \tau_{1}(\FF)\right)
%$$
%where $\pi: \PP^{n}\times \AA^{1}\to \AA^{1}$ is the projection.
%\end{defn}

\begin{defn} \label{defn:product} The functor $\Phi': \DD^{b}(R)\times \DD^b(X) \to \DD^{b}(C)$ is given by:
\daniel{still editing this part}
$$
\Phi'(\FF,\cE) = Rp_{2*} \bigl(\tau(\FF)\otimes_{\P^{n}\times\AA^{1}} (\cE\boxtimes \cO_{\AA^{1}}) \bigr)
$$
where $\FF$ denotes a graded  complex of finitely generated free $S$-modules and
$p_2: \PP^{n}\times \AA^{1}\to \AA^{1}$ is the projection. We will often write
$\FF\cdot \cE$ for $\Phi(\FF,\cE)$.
\end{defn}

We are now prepared to prove Theorem~\ref{thm:Phimulti}.
\begin{proof}[Proof of Theorem~\ref{thm:Phimulti}]
\daniel{work in progress}
\end{proof}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Infinite resolutions}\label{subsec:infinite}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
With notation as in \S\ref{sec:functor}, let $R=R(X,L)$ satisfy the hypotheses of Corollary~\ref{cor:isom cones}.  Let $\FF$ be the minimal free resolution of a finite length $R$-module, and assume that $\FF$ has infinite projective dimension.  We may apply the structure of coresolutions from Example~\ref{ex:coresolutions} for $R$ to show that $\FF$ decomposes as an infinite sum of shifted pure diagrams of codimension $d+1$.  The basic idea can be illustrated by the following examples.\daniel{Some technical stuff to check if we want to keep this subsection.  Namely, we need to extend Corollary~\ref{cor:isom cones} to the refined case.}

\begin{example}
Imagine $R=\kk[x,y]/(x^3)$ and that $\FF$ is the minimal free resolution of the residue field.  Then
\begin{align*}
\beta(\FF)&=\begin{pmatrix}1&2&1&-&-&\dots \\ -&-&1&2&1&\dots \\-&-&-&-&1 &\dots \\ \vdots &\vdots &\vdots &\vdots &\vdots &\ddots \end{pmatrix}\\
&=\begin{pmatrix}1&1&-&-&-&\dots\\ -&-&-&-&-&\dots\\ -&-&-&-&-&\dots\\ \vdots &\vdots &\vdots &\vdots &\vdots &\ddots \end{pmatrix}+
\begin{pmatrix}-&1&1&-&-&\dots\\ -&-&-&-&-&\dots\\ -&-&-&-&-&\dots\\ \vdots &\vdots &\vdots &\vdots &\vdots &\ddots \end{pmatrix}+\dots
\end{align*}
\end{example}

\begin{example}
Imagine $R=\kk[x,y,z]/(x^2,y^2)$ and that $\FF$ is the minimal free resolution of $R/(x,y)$.  Then
\begin{align*}
\beta(\FF)&=\begin{pmatrix}1&3&5&7&\dots \end{pmatrix}\\
&=\begin{pmatrix}1&1&-&-&\dots \end{pmatrix}+\begin{pmatrix}-&2&2&-&\dots \end{pmatrix}+\begin{pmatrix}-&-&3&3&\dots \end{pmatrix}+\dots
\end{align*}
\end{example}

We produce the decomposition as follows.  We consider the truncation $\tr_{\leq e}(\FF)$ obtained by truncating $\FF$ in homological degrees $>e$.  We can decompose $\tr_{\leq e}(\FF)$ as the sum of pure Betti tables using the coresolution cones.  As $e\to \infty$, the decomposition will stabilize in low homological degree, and will only involve diagrams of finite length.  Hence, we'll be able to write $\beta(\FF)$ as an infinite sum of shifted pure diagrams of finite length.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%\subsection{Beyond Betti tables}\label{subsec:beyond}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{bibdiv}
\begin{biblist}

\bib{alper-easton}{article}{
AUTHOR={Alper, Jarod},
AUTHOR = {Easton, Robert},
TITLE = {Recasting results in equivariant geometry: affine cosets, observable subgroups and existence of good quotients},
JOURNAL={arXiv},
NUMBER = {1010.1976},
YEAR = {2010},
}

\bib{bbeg}{article}{
      author={Berkesch, Christine},
      author={Burke, Jesse},
      author={Erman, Daniel},
      author={Gibbons, Courtney},
      title={The cone of Betti diagrams over a hypersurface ring of low embedding dimension },
      note={arXiv: 1109.5198},
      date={2011},
}

\bib{beks-local}{article}{
      author={Berkesch, Christine},
      author={Erman, Daniel},
      author={Kummini, Manoj},
      author={Sam, Steven},
      title={Shapes of free resolutions over a local ring },
      note={arXiv: 1105.2244},
      journal={Math. Annal. (to appear)},
      date={2011},
}


\bib{boij-floystad}{article}{
   author={Boij, Mats},
   author={Fl{\o}ystad, Gunnar},
   title={The cone of Betti diagrams of bigraded Artinian modules of
   codimension two},
   conference={
      title={Combinatorial aspects of commutative algebra and algebraic
      geometry},
   },
   book={
      series={Abel Symp.},
      volume={6},
      publisher={Springer},
      place={Berlin},
   },
   date={2011},
   pages={1--16},
   review={\MR{2810421}},
}

\bib{boij-sod1}{article}{
    AUTHOR = {Boij, Mats},
    AUTHOR = {S{\"o}derberg, Jonas},
     TITLE = {Graded {B}etti numbers of {C}ohen-{M}acaulay modules and the
              multiplicity conjecture},
   JOURNAL = {J. Lond. Math. Soc. (2)},
  FJOURNAL = {Journal of the London Mathematical Society. Second Series},
    VOLUME = {78},
      YEAR = {2008},
    NUMBER = {1},
     PAGES = {85--106},
      ISSN = {0024-6107},
   MRCLASS = {13C14 (13D02 13H15)},
  MRNUMBER = {MR2427053},
}

\bib{boij-sod2}{article}{
AUTHOR={Boij, Mats},
AUTHOR = {S{\"o}derberg, Jonas},
TITLE = {Betti numbers of graded modules and the Multiplicity Conjecture in the non-Cohen-Macaulay case},
JOURNAL={arXiv},
NUMBER = {0803.1645},
YEAR = {2008},
}


%\bib{eis-erm-refined}{article}{
%AUTHOR = {Eisenbud, David},
%AUTHOR = {Erman, Daniel},
%TITLE = {Refined(??) Boij-S\"oderberg Theory},
%notes={in preparation},
%year={2012},
%}

\bib{efw}{article}{
AUTHOR = {Eisenbud, David},
AUTHOR = {Fl{\o}ystad, Gunnar},
AUTHOR = {Weyman, Jerzy},
TITLE = {The Existence of Pure Free Resolutions},
JOURNAL = {arXiv},
NUMBER = {0709.1529},
YEAR = {2008},
}



\bib{eis-schrey1}{article}{
   author={Eisenbud, David},
   author={Schreyer, Frank-Olaf},
   title={Betti numbers of graded modules and cohomology of vector bundles},
   journal={J. Amer. Math. Soc.},
   volume={22},
   date={2009},
   number={3},
   pages={859--888},
   issn={0894-0347},
   %review={\MR{2505303}},
}


\bib{eis-schrey2}{article}{
AUTHOR = {Eisenbud, David},
AUTHOR = {Schreyer, Frank-Olaf},
TITLE = {Cohomology of Coherent Sheaves and Series of Supernatural Bundles},
JOURNAL = {arXiv},
NUMBER = {0902.1594},
YEAR = {2009},
}



\bib{eis-schrey-icm}{inproceedings}{
      author={Eisenbud, David},
      author={Schreyer, Frank-Olaf},
       title={Betti numbers of syzygies and cohomology of coherent sheaves},
        date={2010},
   booktitle={Proceedings of the {I}nternational {C}ongress of
  {M}athematicians},
        note={Hyderabad, India},
}


\bib{eis-schrey-abel}{article}{
   author={Eisenbud, David},
   author={Schreyer, Frank-Olaf},
   title={Boij-S\"oderberg theory},
   conference={
      title={Combinatorial aspects of commutative algebra and algebraic
      geometry},
   },
   book={
      series={Abel Symp.},
      volume={6},
      publisher={Springer},
      place={Berlin},
   },
   date={2011},
   pages={35--48},
   review={\MR{2810424}},
}

\bib{floystad-multigraded}{article}{
   author={Fl{\o}ystad, Gunnar},
   title={The linear space of Betti diagrams of multigraded Artinian
   modules},
   journal={Math. Res. Lett.},
   volume={17},
   date={2010},
   number={5},
   pages={943--958},
   issn={1073-2780},
   review={\MR{2727620 (2012c:13032)}},
}
	

\bib{herzog-srinivasan}{article}{
   author={Herzog, J{\"u}rgen},
   author={Srinivasan, Hema},
   title={Bounds for multiplicities},
   journal={Trans. Amer. Math. Soc.},
   volume={350},
   date={1998},
   number={7},
   pages={2879--2902},
   issn={0002-9947},
   review={\MR{1458304 (99g:13033)}},
   doi={10.1090/S0002-9947-98-02096-0},
}

\bib{miller-speyer}{article}{
   author={Miller, Ezra},
   author={Speyer, David E.},
   title={A Kleiman-Bertini theorem for sheaf tensor products},
   journal={J. Algebraic Geom.},
   volume={17},
   date={2008},
   number={2},
   pages={335--340},
   issn={1056-3911},
   review={\MR{2369089 (2008k:14044)}},
   doi={10.1090/S1056-3911-07-00479-1},
}


\bib{peskine-szpiro}{article}{
   author={Peskine, C.},
   author={Szpiro, L.},
   title={Dimension projective finie et cohomologie locale. Applications \`a
   la d\'emonstration de conjectures de M. Auslander, H. Bass et A.
   Grothendieck},
   language={French},
   journal={Inst. Hautes \'Etudes Sci. Publ. Math.},
   number={42},
   date={1973},
   pages={47--119},
   issn={0073-8301},
   review={\MR{0374130 (51 \#10330)}},
}

\bib{stacks-project}{misc}{
        AUTHOR	= {The Stacks Project Authors},
        TITLE	= {\itshape Stacks Project}, 
        HOWPUBLISHED = {\url{http://math.columbia.edu/algebraic_geometry/stacks-git}},
}


\end{biblist}
\end{bibdiv}
	

\end{document} 